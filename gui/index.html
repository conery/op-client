<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>GUI - OptiPass Client</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../assets/_mkdocstrings.css" rel="stylesheet" />
        <link href="../css/tidegates.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "GUI";
        var mkdocs_page_input_path = "gui.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> OptiPass Client
        </a>
        <div class="version">
          Version 1.0.6
        </div><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">Home</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="..">A Web App for OptiPass™</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Deployment</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../deploy/">Deploying a Client</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Documentation</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../modules/">Reference</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">GUI</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#tidegatesapp">TideGatesApp</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#src.gui.app.TideGatesApp.section_head">section_head</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#src.gui.app.TideGatesApp.validate_settings">validate_settings</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#src.gui.app.TideGatesApp.run_cb">run_cb</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#src.gui.app.TideGatesApp.run_optimizer">run_optimizer</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#src.gui.app.TideGatesApp.map_help_cb">map_help_cb</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#src.gui.app.TideGatesApp.region_help_cb">region_help_cb</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#src.gui.app.TideGatesApp.budget_help_cb">budget_help_cb</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#src.gui.app.TideGatesApp.target_help_cb">target_help_cb</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#src.gui.app.TideGatesApp.climate_help_cb">climate_help_cb</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#budgetbox">BudgetBox</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#src.gui.budgets.BudgetBox.set_budget_max">set_budget_max</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#src.gui.budgets.BudgetBox.values">values</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#src.gui.budgets.BudgetBox.defined">defined</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#src.gui.budgets.BudgetBox.set_value">set_value</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#basicbudgetbox">BasicBudgetBox</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#src.gui.budgets.BasicBudgetBox.set_budget_max">set_budget_max</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#src.gui.budgets.BasicBudgetBox.values">values</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#src.gui.budgets.BasicBudgetBox.defined">defined</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#src.gui.budgets.BasicBudgetBox.set_value">set_value</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#fixedbudgetbox">FixedBudgetBox</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#src.gui.budgets.FixedBudgetBox.values">values</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#src.gui.budgets.FixedBudgetBox.defined">defined</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#src.gui.budgets.FixedBudgetBox.set_value">set_value</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#src.gui.budgets.FixedBudgetBox.parse_dollar_amount">parse_dollar_amount</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#advancedbudgetbox">AdvancedBudgetBox</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#src.gui.budgets.AdvancedBudgetBox.values">values</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#src.gui.budgets.AdvancedBudgetBox.defined">defined</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#src.gui.budgets.AdvancedBudgetBox.set_value">set_value</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#src.gui.budgets.AdvancedBudgetBox.set_budget_max">set_budget_max</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#src.gui.budgets.AdvancedBudgetBox.max_updated">max_updated</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#src.gui.budgets.AdvancedBudgetBox.inc_updated">inc_updated</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#src.gui.budgets.AdvancedBudgetBox.count_updated">count_updated</a>
    </li>
        </ul>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#downloadpane">DownloadPane</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#src.gui.output.DownloadPane._make_folder_name">_make_folder_name</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#src.gui.output.DownloadPane._archive_cb">_archive_cb</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#src.gui.output.DownloadPane._make_archive_dir">_make_archive_dir</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#src.gui.output.DownloadPane._save_files">_save_files</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#infobox">InfoBox</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#src.gui.infobox.InfoBox._cancel_cb">_cancel_cb</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#src.gui.infobox.InfoBox.show_missing">show_missing</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#src.gui.infobox.InfoBox.show_invalid_weights">show_invalid_weights</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#src.gui.infobox.InfoBox.show_params">show_params</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#src.gui.infobox.InfoBox.show_success">show_success</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#src.gui.infobox.InfoBox.show_fail">show_fail</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#outputpane">OutputPane</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#src.gui.output.OutputPane._make_title">_make_title</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#src.gui.output.OutputPane._make_figures_tab">_make_figures_tab</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#src.gui.output.OutputPane._make_budget_table">_make_budget_table</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#src.gui.output.OutputPane._make_gate_table">_make_gate_table</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#src.gui.output.OutputPane.make_dots">make_dots</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#src.gui.output.OutputPane.budget_table_cb">budget_table_cb</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#src.gui.output.OutputPane.hide_dots">hide_dots</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#regionbox">RegionBox</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#src.gui.regionbox.RegionBox.cb">cb</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#src.gui.regionbox.RegionBox.check">check</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#src.gui.regionbox.RegionBox.selection">selection</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#src.gui.regionbox.RegionBox.add_external_callback">add_external_callback</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#targetbox">TargetBox</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#src.gui.targetbox.TargetBox.make_layout">make_layout</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#src.gui.targetbox.TargetBox.selection">selection</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#src.gui.targetbox.TargetBox.weights">weights</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#src.gui.targetbox.TargetBox.mapping">mapping</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#basictargetbox">BasicTargetBox</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#src.gui.targetbox.BasicTargetBox.selection">selection</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#src.gui.targetbox.BasicTargetBox.weights">weights</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#weightedtargetbox">WeightedTargetBox</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#src.gui.targetbox.WeightedTargetBox.selection">selection</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#src.gui.targetbox.WeightedTargetBox.weights">weights</a>
    </li>
        </ul>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#tgmap">TGMap</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#src.gui.tgmap.TGMap.map_coords">map_coords</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#src.gui.tgmap.TGMap.graphic">graphic</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#src.gui.tgmap.TGMap.display_regions">display_regions</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#staticmap">StaticMap</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#tiledmap">TiledMap</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#src.gui.tgmap.TiledMap._make_info">_make_info</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#src.gui.tgmap.TiledMap._make_region_list">_make_region_list</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#src.gui.tgmap.TiledMap._create_ranges">_create_ranges</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#src.gui.tgmap.TiledMap.display_regions">display_regions</a>
    </li>
        </ul>
    </li>
        </ul>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tests/">Tests</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">OptiPass Client</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Documentation</li>
      <li class="breadcrumb-item active">GUI</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="gui">GUI</h1>
<p>The Python syntax for defining a new class that is derived from an existing class uses a <code>class</code> statement.
This is the statement that defines the RegionBox class:</p>
<pre><code>class RegionBox(pn.Column):
    ...
</code></pre>
<p><code>pn.Column</code> is an existing widget class, defined in the Panel library.
That means our new RegionBox objects will be special types of columns that can be inserted into the GUI at some place.</p>
<p>The code that is called to create a new object is a function named <code>__init__</code> defined inside the class.
The first argument to <code>__init__</code> is always <code>self</code>, which is a reference to the object being built.</p>
<p>Here is a simplified version of the <code>__init__</code> function for the RegionBox class (the actual definition is shown below, in the documentation for RegionBox):</p>
<pre><code>class RegionBox(pn.Column):

    def __init__(self, project):
        self.boxes = { }
        for name in OP.region_names:
            box = pn.widgets.Checkbox(name=name, styles=box_styles, stylesheets=[box_style_sheet])
            box.param.watch(self.cb, ['value'])
            self.boxes[name] = box
</code></pre>
<p>When this function is called, it initializes a variable named <code>boxes</code> to be an empty dictionary.  The <code>for</code> loop iterates over all the region names.  It makes a Checkbox widget for each region and adds the box to the dictionary.</p>
<p>The line in the middle of the loop that calls <code>box.param.watch</code> is where all the "magic" happens.  This function call tells the GUI that whenever a checkbox is clicked it should call a function named <code>cb</code> that is also defined inside the RegionBox class.  Here is a simplified version:</p>
<pre><code>def cb(self, event):
    r = event.obj.name
    if event.new:
        self.selected.add(r)
    else:
        self.selected.remove(r)
</code></pre>
<p>The name <code>cb</code> is short for "callback", a common name for this type of function.  The parameter named <code>event</code> has information about what the user just did.  In this case, we want to get the name of the button (which will be one of the region names) and then update the set of selected regions.  If the button was turned on we add the region name to the set, otherwise we remove it.</p>
<h2 id="tidegatesapp">TideGatesApp</h2>


<div class="doc doc-object doc-class">




    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><span title="panel.template.BootstrapTemplate">BootstrapTemplate</span></code></p>


      <p>The web application is based on the Bootstrap template provided by Panel.
It displays a map (an instance of the TGMap class) in the sidebar.  The main content
area has a Tabs widget with five tabs: a welcome message, a help page, the main page
(described below) and two tabs for displaying outputs.</p>
<p>The application also displays several small help buttons next to the main widgets.
Clicking one of these buttons brings up a floating window with information about
the widget.</p>
<p>The main tab (labeled "Start") displays the widgets that allow the user to specify
optimization parameters:  region names, budget levels, and restoration targets.  It
also has a Run button.  When the user clicks this button the callback function makes
sure the necessary parameters have been defined and then uses the template's modal
dialog area.  Clicking the "OK" button in that dialog invokes another callback, 
defined here, that runs the optimizer.</p>



<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>params</code></b>
              –
              <div class="doc-md-description">
                <p>runtime options passed to the parent class constructor</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>
                  <details class="quote">
                    <summary>Source code in <code>src/gui/app.py</code></summary>
                    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initialize the application.</span>

<span class="sd">    Arguments:</span>
<span class="sd">      params:  runtime options passed to the parent class constructor</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">(</span><span class="n">TideGatesApp</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">**</span><span class="n">params</span><span class="p">)</span>

    <span class="c1"># self.project_menu = pn.widgets.Select(options=[&#39;Demo&#39;,&#39;Oregon&#39;], width=150)</span>
    <span class="c1"># self.header.append(pn.Row(</span>
    <span class="c1">#     pn.layout.HSpacer(),</span>
    <span class="c1">#     self.project_menu</span>
    <span class="c1"># ))</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">map</span> <span class="o">=</span> <span class="n">TGMap</span><span class="o">.</span><span class="n">init</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">map_pane</span> <span class="o">=</span> <span class="n">pn</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span>
        <span class="n">pn</span><span class="o">.</span><span class="n">panel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">map</span><span class="o">.</span><span class="n">graphic</span><span class="p">())</span>
    <span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">budget_box</span> <span class="o">=</span> <span class="n">BudgetBox</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">region_boxes</span> <span class="o">=</span> <span class="n">RegionBox</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">map</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">budget_box</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">target_boxes</span> <span class="o">=</span> <span class="n">TargetBox</span><span class="p">()</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">optimize_button</span> <span class="o">=</span> <span class="n">pn</span><span class="o">.</span><span class="n">widgets</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Run Optimizer&#39;</span><span class="p">,</span> <span class="n">stylesheets</span><span class="o">=</span><span class="p">[</span><span class="n">button_style_sheet</span><span class="p">])</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">info</span> <span class="o">=</span> <span class="n">InfoBox</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">run_cb</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">modal</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">info</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">map_help_button</span> <span class="o">=</span> <span class="n">pn</span><span class="o">.</span><span class="n">widgets</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;ℹ️&#39;</span><span class="p">,</span> <span class="n">stylesheets</span> <span class="o">=</span> <span class="p">[</span><span class="n">help_button_style_sheet</span><span class="p">])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">map_help_button</span><span class="o">.</span><span class="n">on_click</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">map_help_cb</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">region_help_button</span> <span class="o">=</span> <span class="n">pn</span><span class="o">.</span><span class="n">widgets</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;ℹ️&#39;</span><span class="p">,</span> <span class="n">stylesheets</span> <span class="o">=</span> <span class="p">[</span><span class="n">help_button_style_sheet</span><span class="p">])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">region_help_button</span><span class="o">.</span><span class="n">on_click</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">region_help_cb</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">budget_help_button</span> <span class="o">=</span> <span class="n">pn</span><span class="o">.</span><span class="n">widgets</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;ℹ️&#39;</span><span class="p">,</span> <span class="n">stylesheets</span> <span class="o">=</span> <span class="p">[</span><span class="n">help_button_style_sheet</span><span class="p">])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">budget_help_button</span><span class="o">.</span><span class="n">on_click</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">budget_help_cb</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">target_help_button</span> <span class="o">=</span> <span class="n">pn</span><span class="o">.</span><span class="n">widgets</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;ℹ️&#39;</span><span class="p">,</span> <span class="n">stylesheets</span> <span class="o">=</span> <span class="p">[</span><span class="n">help_button_style_sheet</span><span class="p">])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">target_help_button</span><span class="o">.</span><span class="n">on_click</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">target_help_cb</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">climate_help_button</span> <span class="o">=</span> <span class="n">pn</span><span class="o">.</span><span class="n">widgets</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;ℹ️&#39;</span><span class="p">,</span> <span class="n">stylesheets</span> <span class="o">=</span> <span class="p">[</span><span class="n">help_button_style_sheet</span><span class="p">])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">climate_help_button</span><span class="o">.</span><span class="n">on_click</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">climate_help_cb</span><span class="p">)</span>

    <span class="c1"># self.tab_height = int(self.map.graphic().height * 1.05)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">tab_height</span> <span class="o">=</span> <span class="mi">900</span>

    <span class="n">welcome_tab</span> <span class="o">=</span> <span class="n">pn</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">section_head</span><span class="p">(</span><span class="s1">&#39;Welcome&#39;</span><span class="p">),</span>
        <span class="n">pn</span><span class="o">.</span><span class="n">pane</span><span class="o">.</span><span class="n">HTML</span><span class="p">(</span><span class="n">OP</span><span class="o">.</span><span class="n">fetch_html_file</span><span class="p">(</span><span class="s1">&#39;welcome.html&#39;</span><span class="p">)),</span>
        <span class="n">height</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tab_height</span><span class="p">,</span>
        <span class="n">scroll</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">help_tab</span> <span class="o">=</span> <span class="n">pn</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">section_head</span><span class="p">(</span><span class="s1">&#39;Instructions&#39;</span><span class="p">),</span>
        <span class="n">pn</span><span class="o">.</span><span class="n">pane</span><span class="o">.</span><span class="n">HTML</span><span class="p">(</span><span class="n">OP</span><span class="o">.</span><span class="n">fetch_html_file</span><span class="p">(</span><span class="s1">&#39;help.html&#39;</span><span class="p">)),</span>
        <span class="n">height</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tab_height</span><span class="p">,</span>
        <span class="n">scroll</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
     <span class="p">)</span>

    <span class="n">start_tab</span> <span class="o">=</span> <span class="n">pn</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">section_head</span><span class="p">(</span><span class="s1">&#39;Geographic Regions&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">region_help_button</span><span class="p">),</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">region_boxes</span><span class="p">,</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">section_head</span><span class="p">(</span><span class="s1">&#39;Budgets&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">budget_help_button</span><span class="p">),</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">budget_box</span><span class="p">,</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">section_head</span><span class="p">(</span><span class="s1">&#39;Targets&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">target_help_button</span><span class="p">),</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">target_boxes</span><span class="p">,</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">optimize_button</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">output_tab</span> <span class="o">=</span> <span class="n">pn</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">section_head</span><span class="p">(</span><span class="s1">&#39;Nothing to See Yet&#39;</span><span class="p">),</span>
        <span class="n">pn</span><span class="o">.</span><span class="n">pane</span><span class="o">.</span><span class="n">HTML</span><span class="p">(</span><span class="s1">&#39;&lt;p&gt;After running the optimizer this tab will show the results.&lt;/p&gt;&#39;</span><span class="p">)</span>
    <span class="p">)</span>

    <span class="n">download_tab</span> <span class="o">=</span> <span class="n">pn</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">section_head</span><span class="p">(</span><span class="s1">&#39;Nothing to Download Yet&#39;</span><span class="p">),</span>
        <span class="n">pn</span><span class="o">.</span><span class="n">pane</span><span class="o">.</span><span class="n">HTML</span><span class="p">(</span><span class="s1">&#39;&lt;p&gt;After running the optimizer use this tab to save the results.&lt;/p&gt;&#39;</span><span class="p">)</span>        <span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">tabs</span> <span class="o">=</span> <span class="n">pn</span><span class="o">.</span><span class="n">Tabs</span><span class="p">(</span>
        <span class="p">(</span><span class="s1">&#39;Home&#39;</span><span class="p">,</span> <span class="n">welcome_tab</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;Help&#39;</span><span class="p">,</span> <span class="n">help_tab</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;Start&#39;</span><span class="p">,</span> <span class="n">start_tab</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;Output&#39;</span><span class="p">,</span> <span class="n">output_tab</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;Download&#39;</span><span class="p">,</span> <span class="n">download_tab</span><span class="p">),</span>
        <span class="n">stylesheets</span><span class="o">=</span><span class="p">[</span><span class="n">tab_style_sheet</span><span class="p">],</span>
        <span class="c1"># tabs_location=&#39;left&#39;,</span>
        <span class="c1"># sizing_mode = &#39;fixed&#39;,</span>
        <span class="c1"># width=800,</span>
        <span class="c1"># height=700,</span>
    <span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">sidebar</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pn</span><span class="o">.</span><span class="n">Row</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">map_pane</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">map_help_button</span><span class="p">))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">main</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tabs</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">optimize_button</span><span class="o">.</span><span class="n">on_click</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_settings</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">DevOP</span><span class="o">.</span><span class="n">default_regions</span><span class="p">():</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">region_boxes</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">budget_box</span><span class="o">.</span><span class="n">set_value</span><span class="p">(</span><span class="n">DevOP</span><span class="o">.</span><span class="n">default_budget</span><span class="p">())</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">target_boxes</span><span class="o">.</span><span class="n">set_selection</span><span class="p">(</span><span class="n">DevOP</span><span class="o">.</span><span class="n">default_targets</span><span class="p">())</span>
    <span class="k">if</span> <span class="n">DevOP</span><span class="o">.</span><span class="n">results_dir</span><span class="p">():</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">run_optimizer</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">tabs</span><span class="o">.</span><span class="n">active</span> <span class="o">=</span> <span class="n">OP</span><span class="o">.</span><span class="n">initial_tab</span>
</code></pre></div></td></tr></table></div>
                  </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="src.gui.app.TideGatesApp.section_head" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">section_head</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>Create an HTML header for one of the sections in the Start tab.</p>

            <details class="quote">
              <summary>Source code in <code>src/gui/app.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">section_head</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create an HTML header for one of the sections in the Start tab.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">header</span> <span class="o">=</span> <span class="n">pn</span><span class="o">.</span><span class="n">pane</span><span class="o">.</span><span class="n">HTML</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;&lt;h3&gt;</span><span class="si">{</span><span class="n">s</span><span class="si">}</span><span class="s1">&lt;/h3&gt;&#39;</span><span class="p">,</span> <span class="n">styles</span><span class="o">=</span><span class="n">header_styles</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">header</span> <span class="k">if</span> <span class="n">b</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">pn</span><span class="o">.</span><span class="n">Row</span><span class="p">(</span><span class="n">header</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="src.gui.app.TideGatesApp.validate_settings" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">validate_settings</span><span class="p">(</span><span class="n">_</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>Callback function invoked when the user clicks the Run Optimizer button.</p>

            <details class="quote">
              <summary>Source code in <code>src/gui/app.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">validate_settings</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Callback function invoked when the user clicks the Run Optimizer button.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">regions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">region_boxes</span><span class="o">.</span><span class="n">selection</span><span class="p">()</span>
    <span class="n">budget</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">budget_box</span><span class="o">.</span><span class="n">defined</span><span class="p">()</span>
    <span class="n">targets</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">target_boxes</span><span class="o">.</span><span class="n">selection</span><span class="p">()</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">regions</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">or</span> <span class="p">(</span><span class="ow">not</span> <span class="n">budget</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">targets</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">info</span><span class="o">.</span><span class="n">show_missing</span><span class="p">(</span><span class="n">regions</span><span class="p">,</span> <span class="n">budget</span><span class="p">,</span> <span class="n">targets</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="n">weights</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">target_boxes</span><span class="o">.</span><span class="n">weights</span><span class="p">():</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">all</span><span class="p">([</span><span class="n">w</span><span class="o">.</span><span class="n">isdigit</span><span class="p">()</span> <span class="ow">and</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;=</span> <span class="nb">int</span><span class="p">(</span><span class="n">w</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">5</span><span class="p">)</span> <span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="n">weights</span><span class="p">]):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">info</span><span class="o">.</span><span class="n">show_invalid_weights</span><span class="p">(</span><span class="n">weights</span><span class="p">)</span>
            <span class="k">return</span>

    <span class="n">mapping</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">target_boxes</span><span class="o">.</span><span class="n">mapping</span><span class="p">()</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">info</span><span class="o">.</span><span class="n">show_params</span><span class="p">(</span><span class="n">regions</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">budget_box</span><span class="o">.</span><span class="n">values</span><span class="p">(),</span> <span class="n">targets</span><span class="p">,</span> <span class="n">weights</span><span class="p">,</span> <span class="n">mapping</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="src.gui.app.TideGatesApp.run_cb" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">run_cb</span><span class="p">(</span><span class="n">_</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>Callback function invoked when the user clicks the Continue button after verifying
the parameter options.</p>
<p>Wrap the call to the function that runs the optimizer in code that shows the loading
icon and opens a message when the function returns.</p>

            <details class="quote">
              <summary>Source code in <code>src/gui/app.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">run_cb</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Callback function invoked when the user clicks the Continue button after verifying</span>
<span class="sd">    the parameter options.</span>

<span class="sd">    Wrap the call to the function that runs the optimizer in code that shows the loading</span>
<span class="sd">    icon and opens a message when the function returns.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">close_modal</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">main</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">loading</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">run_optimizer</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">main</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">loading</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">info</span><span class="o">.</span><span class="n">show_success</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">OPServerError</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">main</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">loading</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">info</span><span class="o">.</span><span class="n">show_fail</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="src.gui.app.TideGatesApp.run_optimizer" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">run_optimizer</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>Use the settings in the widgets to run OptiPass, save the results
in the output tab.</p>

            <details class="quote">
              <summary>Source code in <code>src/gui/app.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">run_optimizer</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Use the settings in the widgets to run OptiPass, save the results</span>
<span class="sd">    in the output tab.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">params</span> <span class="o">=</span> <span class="p">[</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">region_boxes</span><span class="o">.</span><span class="n">selection</span><span class="p">(),</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">budget_box</span><span class="o">.</span><span class="n">values</span><span class="p">(),</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">target_boxes</span><span class="o">.</span><span class="n">selection</span><span class="p">(),</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">target_boxes</span><span class="o">.</span><span class="n">weights</span><span class="p">(),</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">target_boxes</span><span class="o">.</span><span class="n">mapping</span><span class="p">(),</span>
    <span class="p">]</span>

    <span class="n">resp</span> <span class="o">=</span> <span class="n">OP</span><span class="o">.</span><span class="n">run_optimizer</span><span class="p">(</span><span class="o">*</span><span class="n">params</span><span class="p">)</span>

    <span class="n">params</span> <span class="o">+=</span> <span class="n">resp</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">OPResult</span><span class="p">(</span><span class="o">*</span><span class="n">params</span><span class="p">)</span>
    <span class="n">output</span> <span class="o">=</span> <span class="n">OutputPane</span><span class="p">(</span><span class="n">res</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">map</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">region_boxes</span><span class="o">.</span><span class="n">add_external_callback</span><span class="p">(</span><span class="n">output</span><span class="o">.</span><span class="n">hide_dots</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">tabs</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;Output&#39;</span><span class="p">,</span> <span class="n">pn</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">output</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">tab_height</span><span class="p">,</span> <span class="n">scroll</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">tabs</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;Download&#39;</span><span class="p">,</span> <span class="n">pn</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">DownloadPane</span><span class="p">(</span><span class="n">res</span><span class="p">),</span> <span class="n">height</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">tab_height</span><span class="p">,</span> <span class="n">scroll</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="src.gui.app.TideGatesApp.map_help_cb" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">map_help_cb</span><span class="p">(</span><span class="n">_</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>Callback function for the help button next to the map in the sidebar.</p>

            <details class="quote">
              <summary>Source code in <code>src/gui/app.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">map_help_cb</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Callback function for the help button next to the map in the sidebar.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">msg</span> <span class="o">=</span> <span class="n">pn</span><span class="o">.</span><span class="n">pane</span><span class="o">.</span><span class="n">HTML</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">    &lt;p&gt;When you move your mouse over the map the cursor will change to a &quot;crosshairs&quot; symbol and a set of buttons will appear below the map.</span>
<span class="s1">    Navigating with the map is similar to using Google maps or other online maps:&lt;/p&gt;</span>
<span class="s1">    &lt;ul&gt;</span>
<span class="s1">        &lt;li&gt;Left-click and drag to pan (move left and right or up and down).&lt;/li&gt;</span>
<span class="s1">        &lt;li&gt;If you want to zoom in and out, first click the magnifying glass button below the map; then you can zoom in and out using the scroll wheel on your mouse.&lt;/li&gt;   </span>
<span class="s1">        &lt;li&gt;Click the refresh button to restore the map to its original size and location.&lt;/li&gt;</span>
<span class="s1">    &lt;/ul&gt;</span>
<span class="s1">    &#39;&#39;&#39;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">tabs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pn</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">FloatPanel</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;Map Controls&#39;</span><span class="p">,</span> <span class="n">contained</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">400</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="src.gui.app.TideGatesApp.region_help_cb" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">region_help_cb</span><span class="p">(</span><span class="n">_</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>Callback function for the help button next to the region box widget in the start tab.</p>

            <details class="quote">
              <summary>Source code in <code>src/gui/app.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">region_help_cb</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Callback function for the help button next to the region box widget in the start tab.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">msg</span> <span class="o">=</span> <span class="n">pn</span><span class="o">.</span><span class="n">pane</span><span class="o">.</span><span class="n">HTML</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">    &lt;p&gt;Select a region by clicking in the box to the left of an estuary name.&lt;/p&gt;</span>
<span class="s1">    &lt;p&gt;Each time you click in a box the map will be updated to show the positions of the barriers that are in our database for the estuary.&lt;/p&gt;</span>
<span class="s1">    &lt;p&gt;You must select at least one region before you run the optimizer.&lt;/p&gt;</span>
<span class="s1">    &#39;&#39;&#39;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">tabs</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pn</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">FloatPanel</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;Geographic Regions&#39;</span><span class="p">,</span> <span class="n">contained</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">400</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="src.gui.app.TideGatesApp.budget_help_cb" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">budget_help_cb</span><span class="p">(</span><span class="n">_</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>Callback function for the help button next to the budget box widget in the start tab.</p>

            <details class="quote">
              <summary>Source code in <code>src/gui/app.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">budget_help_cb</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Callback function for the help button next to the budget box widget in the start tab.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">msg</span> <span class="o">=</span> <span class="n">pn</span><span class="o">.</span><span class="n">pane</span><span class="o">.</span><span class="n">HTML</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">    &lt;p&gt;There are three ways to specify the budgets used by the optimizer.&lt;/p&gt;</span>
<span class="s1">    &lt;H4&gt;Basic&lt;/H4&gt;</span>
<span class="s1">    &lt;p&gt;The simplest method is to specify an upper limit by moving the slider back and forth.  When you use this method, the optimizer will run 10 times, ending at the value you select with the slider.  For example, if you set the slider at $10M (the abbreviation for $10 million), the optimizer will make ROI curves based on budgets of $1M, $2M, &lt;i&gt;etc&lt;/i&gt;, up to the maximum of $10M.&lt;/p&gt;</span>
<span class="s1">    &lt;p&gt;Note that the slider is disabled until you select one or more regions.  That&#39;s because the maximum value depends on the costs of the gates in each region.</span>
<span class="s1">    For example, the total cost of all gates in the Coquille region is $11.8M.  Once you choose that region, you can move the budget slider</span>
<span class="s1">    left and right to pick a maximum budget for the optimizer to consider.</span>
<span class="s1">    &lt;H4&gt;Advanced&lt;/H4&gt;</span>
<span class="s1">    &lt;p&gt;If you click on the Advanced tab in this section you will see ways to specify the budget interval and the number of budgets.&lt;/p&gt;</span>
<span class="s1">    &lt;p&gt;You can use this method if you want more control over the layout of the ROI curves, for example you can include more points by increasing the number of budgets.&lt;/p&gt;</span>
<span class="s1">    &lt;H4&gt;Fixed&lt;/H4&gt;</span>
<span class="s1">    &lt;p&gt;If you know exactly how much money you have to spend you can enter that amount by clicking on the Fixed tab and entering the budget amount.&lt;/p&gt;</span>
<span class="s1">    &lt;p&gt;The optimizer will run just once, using that budget.  The output will have tables showing the gates identified by the optimizer, but there will be no ROI curve.&lt;/p&gt;</span>
<span class="s1">    &lt;p&gt;When entering values, you can write the full amount, with or without commas (&lt;i&gt;e.g.&lt;/i&gt;11,500,000 or 11500000) or use the abbreviated form (11.5M).&lt;/p&gt;</span>
<span class="s1">    &#39;&#39;&#39;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">tabs</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pn</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">FloatPanel</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;Budget Levels&#39;</span><span class="p">,</span> <span class="n">contained</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">400</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="src.gui.app.TideGatesApp.target_help_cb" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">target_help_cb</span><span class="p">(</span><span class="n">_</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>Callback function for the help button next to the target box widget in the start tab.</p>

            <details class="quote">
              <summary>Source code in <code>src/gui/app.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">target_help_cb</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Callback function for the help button next to the target box widget in the start tab.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">msg</span> <span class="o">=</span> <span class="n">pn</span><span class="o">.</span><span class="n">pane</span><span class="o">.</span><span class="n">HTML</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">    &lt;p&gt;Click boxes next to one or more target names to have the optimizer include those targets in its calculations.&lt;/p&gt;</span>
<span class="s1">    &lt;p&gt;The optimizer will create an ROI curve for each target selected. &lt;/p&gt;</span>
<span class="s1">    &lt;p&gt;If more than one target is selected the optimizer will also generate an overall &quot;net benefit&quot; curve based on considering all targets at the same time.&lt;/p&gt;</span>
<span class="s1">    &#39;&#39;&#39;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">tabs</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pn</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">FloatPanel</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;Targets&#39;</span><span class="p">,</span> <span class="n">contained</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">400</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="src.gui.app.TideGatesApp.climate_help_cb" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">climate_help_cb</span><span class="p">(</span><span class="n">_</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>Callback function for the help button next to the climate scenario checkbox in the start tab.</p>

            <details class="quote">
              <summary>Source code in <code>src/gui/app.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">climate_help_cb</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Callback function for the help button next to the climate scenario checkbox in the start tab.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">msg</span> <span class="o">=</span> <span class="n">pn</span><span class="o">.</span><span class="n">pane</span><span class="o">.</span><span class="n">HTML</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">    &lt;p&gt;By default the optimizer uses current water levels when computing potential benefits.  Click the button next to &lt;b&gt;Future&lt;/b&gt; to have it use water levels expected due to climate change.&lt;/p&gt;</span>
<span class="s1">    &lt;p&gt;The future scenario uses two projected water levels, both for the period to 2100. For fish habitat targets, the future water level is based on projected sea level rise of 5.0 feet.  For agriculture and infrastructure targets, the future water level is projected to be 7.2 feet, which includes sea level rise and the probabilities of extreme water levels causing flooding events.&lt;/p&gt;</span>
<span class="s1">    &#39;&#39;&#39;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">tabs</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pn</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">FloatPanel</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;Targets&#39;</span><span class="p">,</span> <span class="n">contained</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">400</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div><h2 id="budgetbox">BudgetBox</h2>


<div class="doc doc-object doc-class">




    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><span title="panel.Column">Column</span></code></p>


      <p>There are three ways users can specify the range of budget values
when running OptiPass.  A BudgetBox widget has one tab for each option.
The widgets displayed inside a tab are defined by their own classes
(BasicBudgetBox, AdvancedBudgetBox, and FixedBudgetBox).</p>

                  <details class="quote">
                    <summary>Source code in <code>src/gui/budgets.py</code></summary>
                    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="nb">super</span><span class="p">(</span><span class="n">BudgetBox</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">tabs</span> <span class="o">=</span> <span class="n">pn</span><span class="o">.</span><span class="n">Tabs</span><span class="p">(</span>
        <span class="p">(</span><span class="s1">&#39;Basic&#39;</span><span class="p">,</span> <span class="n">BasicBudgetBox</span><span class="p">()),</span>
        <span class="p">(</span><span class="s1">&#39;Advanced&#39;</span><span class="p">,</span> <span class="n">AdvancedBudgetBox</span><span class="p">()),</span>
        <span class="p">(</span><span class="s1">&#39;Fixed&#39;</span><span class="p">,</span> <span class="n">FixedBudgetBox</span><span class="p">()),</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tabs</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
                  </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="src.gui.budgets.BudgetBox.set_budget_max" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">set_budget_max</span><span class="p">(</span><span class="n">n</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>When the user selects or deselects a region the budget widgets need
to know the new total cost for all the selected regions.  This method
passes that information to each of the budget widgets.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>n</code></b>
                  (<code>int</code>)
              –
              <div class="doc-md-description">
                <p>the new maximum budget amount</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>
            <details class="quote">
              <summary>Source code in <code>src/gui/budgets.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">set_budget_max</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    When the user selects or deselects a region the budget widgets need</span>
<span class="sd">    to know the new total cost for all the selected regions.  This method</span>
<span class="sd">    passes that information to each of the budget widgets.</span>

<span class="sd">    Arguments:</span>
<span class="sd">      n: the new maximum budget amount</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">tabs</span><span class="p">:</span>
        <span class="n">t</span><span class="o">.</span><span class="n">set_budget_max</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="src.gui.budgets.BudgetBox.values" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">values</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>Return the budget settings for the currently selected budget type.  Get
the widget values from the active budget type, convert them into a tuple
of values that will be passed to the optimizer.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Returns:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
<b><code>bmin</code></b>              –
              <div class="doc-md-description">
                <p>the starting budget</p>
              </div>
            </li>
            <li>
<b><code>binc</code></b>              –
              <div class="doc-md-description">
                <p>the increment between budget values</p>
              </div>
            </li>
            <li>
<b><code>bcnt</code></b>              –
              <div class="doc-md-description">
                <p>the number of budget values</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>
            <details class="quote">
              <summary>Source code in <code>src/gui/budgets.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">values</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return the budget settings for the currently selected budget type.  Get</span>
<span class="sd">    the widget values from the active budget type, convert them into a tuple</span>
<span class="sd">    of values that will be passed to the optimizer.</span>

<span class="sd">    Returns:</span>
<span class="sd">      bmin:  the starting budget</span>
<span class="sd">      binc:  the increment between budget values</span>
<span class="sd">      bcnt:  the number of budget values </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">tabs</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">tabs</span><span class="o">.</span><span class="n">active</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="src.gui.budgets.BudgetBox.defined" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">defined</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>Return True if the user has defined a budget using the current tab</p>

            <details class="quote">
              <summary>Source code in <code>src/gui/budgets.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">defined</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return True if the user has defined a budget using the current tab</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">tabs</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">tabs</span><span class="o">.</span><span class="n">active</span><span class="p">]</span><span class="o">.</span><span class="n">defined</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="src.gui.budgets.BudgetBox.set_value" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">set_value</span><span class="p">(</span><span class="n">n</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>Initialize the GUI by setting an initial budget value</p>

            <details class="quote">
              <summary>Source code in <code>src/gui/budgets.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">set_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initialize the GUI by setting an initial budget value</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">tabs</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">tabs</span><span class="o">.</span><span class="n">active</span><span class="p">]</span><span class="o">.</span><span class="n">set_value</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div><h3 id="basicbudgetbox">BasicBudgetBox</h3>


<div class="doc doc-object doc-class">




    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><span title="panel.WidgetBox">WidgetBox</span></code></p>


      <p>The default budget widget displays a slider that ranges from 0
up to a maximum value based on the total cost of all barriers in
currently selected regions.</p>

                  <details class="quote">
                    <summary>Source code in <code>src/gui/budgets.py</code></summary>
                    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span>
<span class="normal">96</span>
<span class="normal">97</span>
<span class="normal">98</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="nb">super</span><span class="p">(</span><span class="n">BasicBudgetBox</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">margin</span><span class="o">=</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">15</span><span class="p">,</span><span class="mi">5</span><span class="p">))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">labels</span> <span class="o">=</span> <span class="p">[</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">levels</span> <span class="p">]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">map</span> <span class="o">=</span> <span class="p">{</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">levels</span> <span class="p">}</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">slider</span> <span class="o">=</span> <span class="n">pn</span><span class="o">.</span><span class="n">widgets</span><span class="o">.</span><span class="n">DiscreteSlider</span><span class="p">(</span>
        <span class="n">options</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">labels</span><span class="p">[:</span><span class="bp">self</span><span class="o">.</span><span class="n">MIN_LEVELS</span><span class="p">],</span> 
        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">labels</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
        <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Maximum Budget&#39;</span><span class="p">,</span>
        <span class="n">margin</span><span class="o">=</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">20</span><span class="p">),</span>
        <span class="n">stylesheets</span><span class="o">=</span><span class="p">[</span><span class="n">slider_style_sheet</span><span class="p">],</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">slider</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
                  </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="src.gui.budgets.BasicBudgetBox.set_budget_max" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">set_budget_max</span><span class="p">(</span><span class="n">n</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Choose a maximum budget by scanning a table of budget levels to
find the first one less than the total cost.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>n</code></b>
              –
              <div class="doc-md-description">
                <p>the total cost of all barriers in the current selection.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>
            <details class="quote">
              <summary>Source code in <code>src/gui/budgets.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">set_budget_max</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Choose a maximum budget by scanning a table of budget levels to</span>
<span class="sd">    find the first one less than the total cost.</span>

<span class="sd">    Arguments:</span>
<span class="sd">      n: the total cost of all barriers in the current selection.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">levels</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">n</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">levels</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">]:</span>
            <span class="k">break</span>
    <span class="n">i</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">MIN_LEVELS</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">slider</span><span class="o">.</span><span class="n">options</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">labels</span><span class="p">[:</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="src.gui.budgets.BasicBudgetBox.values" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">values</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>The basic budget always has the same number of budgets and always
starts with $0.  Determine the increment by dividing the max budget
in the slider by the number of budgets.</p>

            <details class="quote">
              <summary>Source code in <code>src/gui/budgets.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">values</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The basic budget always has the same number of budgets and always</span>
<span class="sd">    starts with $0.  Determine the increment by dividing the max budget</span>
<span class="sd">    in the slider by the number of budgets.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">map</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">slider</span><span class="o">.</span><span class="n">value</span><span class="p">]</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">,</span> <span class="n">x</span> <span class="o">//</span> <span class="bp">self</span><span class="o">.</span><span class="n">BUDGET_COUNT</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">BUDGET_COUNT</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="src.gui.budgets.BasicBudgetBox.defined" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">defined</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>The basic budget is set if the slider is not in the first location.</p>

            <details class="quote">
              <summary>Source code in <code>src/gui/budgets.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">defined</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The basic budget is set if the slider is not in the first location.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">slider</span><span class="o">.</span><span class="n">value</span> <span class="o">!=</span> <span class="s1">&#39;$0&#39;</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="src.gui.budgets.BasicBudgetBox.set_value" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">set_value</span><span class="p">(</span><span class="n">n</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Set the slider to n</p>

            <details class="quote">
              <summary>Source code in <code>src/gui/budgets.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">set_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Set the slider to n</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">slider</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">slider</span><span class="o">.</span><span class="n">options</span><span class="p">[</span><span class="n">n</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div><h3 id="fixedbudgetbox">FixedBudgetBox</h3>


<div class="doc doc-object doc-class">




    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><span title="panel.WidgetBox">WidgetBox</span></code></p>


      <p>This option is for situations where a user knows exactly how much money they
have to spend and want to know the optimal set of barriers to replace for that
amount of money.  OptiPass is run twice -- once to determine the current 
passabilities, and once to compute the benefit from the specified budget.
The widget simply displays a box where the user enters the dollar amount for
their budget.</p>

                  <details class="quote">
                    <summary>Source code in <code>src/gui/budgets.py</code></summary>
                    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="nb">super</span><span class="p">(</span><span class="n">FixedBudgetBox</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">margin</span><span class="o">=</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">15</span><span class="p">,</span><span class="mi">5</span><span class="p">))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">input</span> <span class="o">=</span> <span class="n">pn</span><span class="o">.</span><span class="n">widgets</span><span class="o">.</span><span class="n">TextInput</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Budget Amount&#39;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s1">&#39;$&#39;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">input</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
                  </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="src.gui.budgets.FixedBudgetBox.values" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">values</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>A fixed budget has one value, returned as the starting budget.  The 
the increment is 0 and count is 1.</p>

            <details class="quote">
              <summary>Source code in <code>src/gui/budgets.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">values</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A fixed budget has one value, returned as the starting budget.  The </span>
<span class="sd">    the increment is 0 and count is 1.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">s</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">value</span>
    <span class="k">if</span> <span class="n">s</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;$&#39;</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="n">s</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
    <span class="n">n</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parse_dollar_amount</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">n</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="src.gui.budgets.FixedBudgetBox.defined" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">defined</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>The fixed budget is set if the text box is not empty.</p>

            <details class="quote">
              <summary>Source code in <code>src/gui/budgets.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">defined</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The fixed budget is set if the text box is not empty.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">parse_dollar_amount</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">value</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="src.gui.budgets.FixedBudgetBox.set_value" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">set_value</span><span class="p">(</span><span class="n">n</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Initialize the budget to n</p>

            <details class="quote">
              <summary>Source code in <code>src/gui/budgets.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">set_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initialize the budget to n</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;$</span><span class="si">{</span><span class="n">n</span><span class="si">}</span><span class="s1">&#39;</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="src.gui.budgets.FixedBudgetBox.parse_dollar_amount" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">parse_dollar_amount</span><span class="p">(</span><span class="n">s</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Make sure the string entered by the user has an acceptable format.
It can be all digits (e.g. "1500000"), or digits separated by commas
(e.g. "1,500,000"), or a number followed by a K or M (e.g. "1.5M").
There can be a dollar sign at the front of the string.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>s</code></b>
                  (<code>str</code>)
              –
              <div class="doc-md-description">
                <p>the string entered into the text box</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Returns:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              –
              <div class="doc-md-description">
                <p>the value of the string converted into an integer</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>
            <details class="quote">
              <summary>Source code in <code>src/gui/budgets.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">parse_dollar_amount</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Make sure the string entered by the user has an acceptable format.</span>
<span class="sd">    It can be all digits (e.g. &quot;1500000&quot;), or digits separated by commas</span>
<span class="sd">    (e.g. &quot;1,500,000&quot;), or a number followed by a K or M (e.g. &quot;1.5M&quot;).</span>
<span class="sd">    There can be a dollar sign at the front of the string.</span>

<span class="sd">    Arguments:</span>
<span class="sd">      s:  the string entered into the text box</span>

<span class="sd">    Returns:</span>
<span class="sd">      the value of the string converted into an integer</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">s</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;$&#39;</span><span class="p">):</span>
            <span class="n">s</span> <span class="o">=</span> <span class="n">s</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
        <span class="k">if</span> <span class="n">s</span><span class="o">.</span><span class="n">endswith</span><span class="p">((</span><span class="s1">&#39;K&#39;</span><span class="p">,</span><span class="s1">&#39;M&#39;</span><span class="p">)):</span>
            <span class="n">multiplier</span> <span class="o">=</span> <span class="mi">1000</span> <span class="k">if</span> <span class="n">s</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;K&#39;</span><span class="p">)</span> <span class="k">else</span> <span class="mi">1000000</span>
            <span class="n">res</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">s</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span> <span class="o">*</span> <span class="n">multiplier</span><span class="p">)</span>
        <span class="k">elif</span> <span class="s1">&#39;,&#39;</span> <span class="ow">in</span> <span class="n">s</span><span class="p">:</span>
            <span class="n">parts</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>
            <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">parts</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">&lt;=</span> <span class="mi">3</span> <span class="ow">and</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">parts</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">or</span> <span class="nb">all</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">parts</span><span class="p">[</span><span class="mi">1</span><span class="p">:]))</span>
            <span class="n">res</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">parts</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">res</span> <span class="o">=</span> <span class="mi">0</span> <span class="k">if</span> <span class="n">s</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span> <span class="k">else</span> <span class="nb">int</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">res</span>
    <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">0</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div><h3 id="advancedbudgetbox">AdvancedBudgetBox</h3>


<div class="doc doc-object doc-class">




    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><span title="panel.WidgetBox">WidgetBox</span></code></p>


      <p>The "advanced" option gives the user the most control over the budget values processed
by OptiPass by letting them specify the number of budget levels (in the basic budget
there are always 10 budget levels).  </p>
<p>This box has three widgets:  a slider to specify the
maximum amount, another slider to specify the increment between budgets, and
an input box to specify the number of budgets.  Adjusting the value of any of these
widgets automatically updates the other two.  For example, if the maximum is set to $1M
and the number of budgets is 10, the increment is $100K.  If the user changes the number
of budgets to 20, the increment drops to $50K.  Or if they change the maximum to $2M, the
increment increases to $200K.</p>

                  <details class="quote">
                    <summary>Source code in <code>src/gui/budgets.py</code></summary>
                    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="nb">super</span><span class="p">(</span><span class="n">AdvancedBudgetBox</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">margin</span><span class="o">=</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">15</span><span class="p">,</span><span class="mi">5</span><span class="p">),</span> <span class="n">width</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">BOX_WIDTH</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">cap</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">max_slider</span> <span class="o">=</span> <span class="n">pn</span><span class="o">.</span><span class="n">widgets</span><span class="o">.</span><span class="n">FloatSlider</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s1">&#39;Maximum Budget&#39;</span><span class="p">,</span> 
        <span class="n">start</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> 
        <span class="n">end</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> 
        <span class="n">step</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">MAX_STEP</span><span class="p">,</span>
        <span class="n">value</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
        <span class="n">width</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">MAX_SLIDER_WIDTH</span><span class="p">,</span>
        <span class="nb">format</span><span class="o">=</span><span class="n">NumeralTickFormatter</span><span class="p">(</span><span class="nb">format</span><span class="o">=</span><span class="s1">&#39;$0,0&#39;</span><span class="p">),</span>
        <span class="n">stylesheets</span><span class="o">=</span><span class="p">[</span><span class="n">slider_style_sheet</span><span class="p">],</span>
    <span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">inc_slider</span> <span class="o">=</span> <span class="n">pn</span><span class="o">.</span><span class="n">widgets</span><span class="o">.</span><span class="n">FloatSlider</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s1">&#39;Budget Interval&#39;</span><span class="p">,</span> 
        <span class="n">start</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> 
        <span class="n">end</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> 
        <span class="n">step</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">INC_STEP</span><span class="p">,</span>
        <span class="n">value</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
        <span class="n">width</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">INC_SLIDER_WIDTH</span><span class="p">,</span>
        <span class="nb">format</span><span class="o">=</span><span class="n">NumeralTickFormatter</span><span class="p">(</span><span class="nb">format</span><span class="o">=</span><span class="s1">&#39;$0,0&#39;</span><span class="p">),</span>
        <span class="n">stylesheets</span><span class="o">=</span><span class="p">[</span><span class="n">slider_style_sheet</span><span class="p">],</span>
    <span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">count_input</span> <span class="o">=</span> <span class="n">pn</span><span class="o">.</span><span class="n">widgets</span><span class="o">.</span><span class="n">IntInput</span><span class="p">(</span>
        <span class="n">value</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> 
        <span class="n">step</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> 
        <span class="n">start</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">COUNT_MIN</span><span class="p">,</span>
        <span class="n">end</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">COUNT_MAX</span><span class="p">,</span>
        <span class="n">width</span><span class="o">=</span><span class="mi">75</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pn</span><span class="o">.</span><span class="n">GridBox</span><span class="p">(</span>
        <span class="n">nrows</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
        <span class="n">ncols</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
        <span class="n">objects</span><span class="o">=</span><span class="p">[</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">max_slider</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">inc_slider</span><span class="p">,</span>
            <span class="n">pn</span><span class="o">.</span><span class="n">pane</span><span class="o">.</span><span class="n">HTML</span><span class="p">(</span><span class="s1">&#39;&lt;b&gt;Limit: N/A&lt;b&gt;&#39;</span><span class="p">),</span>
            <span class="n">pn</span><span class="o">.</span><span class="n">Row</span><span class="p">(</span><span class="n">pn</span><span class="o">.</span><span class="n">pane</span><span class="o">.</span><span class="n">HTML</span><span class="p">(</span><span class="s1">&#39;#Budgets:&#39;</span><span class="p">),</span><span class="bp">self</span><span class="o">.</span><span class="n">count_input</span><span class="p">,</span> <span class="n">align</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;start&#39;</span><span class="p">,</span><span class="s1">&#39;center&#39;</span><span class="p">))</span>
        <span class="p">]</span>
    <span class="p">))</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">max_slider</span><span class="o">.</span><span class="n">param</span><span class="o">.</span><span class="n">watch</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">max_updated</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;value&#39;</span><span class="p">])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">inc_slider</span><span class="o">.</span><span class="n">param</span><span class="o">.</span><span class="n">watch</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">inc_updated</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;value&#39;</span><span class="p">])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">count_input</span><span class="o">.</span><span class="n">param</span><span class="o">.</span><span class="n">watch</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">count_updated</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;value&#39;</span><span class="p">])</span>
</code></pre></div></td></tr></table></div>
                  </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="src.gui.budgets.AdvancedBudgetBox.values" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">values</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>In this widget the budget increment and budget count are determined
by the values in the corresponding widgets.</p>

            <details class="quote">
              <summary>Source code in <code>src/gui/budgets.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">values</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    In this widget the budget increment and budget count are determined</span>
<span class="sd">    by the values in the corresponding widgets.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">inc_slider</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">count_input</span><span class="o">.</span><span class="n">value</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="src.gui.budgets.AdvancedBudgetBox.defined" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">defined</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>The advance budget is set if the increment is not 0</p>

            <details class="quote">
              <summary>Source code in <code>src/gui/budgets.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">defined</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The advance budget is set if the increment is not 0</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">inc_slider</span><span class="o">.</span><span class="n">value</span> <span class="o">&gt;</span> <span class="mi">0</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="src.gui.budgets.AdvancedBudgetBox.set_value" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">set_value</span><span class="p">(</span><span class="n">n</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Set the budget to n</p>

            <details class="quote">
              <summary>Source code in <code>src/gui/budgets.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">set_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Set the budget to n</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">max_slider</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">n</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="src.gui.budgets.AdvancedBudgetBox.set_budget_max" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">set_budget_max</span><span class="p">(</span><span class="n">n</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Called when the user selects or deselects a region.  Save the new
maximum, and update the value of the increment based on the new maximum.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>n</code></b>
              –
              <div class="doc-md-description">
                <p>the total cost of all barriers in the selected regions.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>
            <details class="quote">
              <summary>Source code in <code>src/gui/budgets.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">set_budget_max</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Called when the user selects or deselects a region.  Save the new</span>
<span class="sd">    maximum, and update the value of the increment based on the new maximum.</span>

<span class="sd">    Arguments:</span>
<span class="sd">      n:  the total cost of all barriers in the selected regions.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">max_slider</span><span class="o">.</span><span class="n">end</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">max_slider</span><span class="o">.</span><span class="n">start</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">MAX_STEP</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">inc_slider</span><span class="o">.</span><span class="n">end</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">n</span> <span class="o">//</span> <span class="mi">2</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">inc_slider</span><span class="o">.</span><span class="n">start</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">INC_STEP</span><span class="p">,</span> <span class="n">n</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">COUNT_MAX</span><span class="p">)</span>
    <span class="n">lim</span> <span class="o">=</span> <span class="s1">&#39;N/A&#39;</span> <span class="k">if</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">else</span> <span class="sa">f</span><span class="s1">&#39;$</span><span class="si">{</span><span class="n">n</span><span class="o">/</span><span class="mi">1000000</span><span class="si">:</span><span class="s1">.2f</span><span class="si">}</span><span class="s1">M&#39;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">objects</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">pn</span><span class="o">.</span><span class="n">pane</span><span class="o">.</span><span class="n">HTML</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;&lt;b&gt;Limit: </span><span class="si">{</span><span class="n">lim</span><span class="si">}</span><span class="s1">&lt;/b&gt;&#39;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="src.gui.budgets.AdvancedBudgetBox.max_updated" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">max_updated</span><span class="p">(</span><span class="n">e</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Callback function invoked when the user moves the maximum budget
slider.  Computes a new budget increment.</p>

            <details class="quote">
              <summary>Source code in <code>src/gui/budgets.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">max_updated</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Callback function invoked when the user moves the maximum budget</span>
<span class="sd">    slider.  Computes a new budget increment.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">inc_slider</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_slider</span><span class="o">.</span><span class="n">value</span> <span class="o">//</span> <span class="bp">self</span><span class="o">.</span><span class="n">count_input</span><span class="o">.</span><span class="n">value</span>
    <span class="k">except</span> <span class="ne">ArithmeticError</span><span class="p">:</span>
        <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="src.gui.budgets.AdvancedBudgetBox.inc_updated" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">inc_updated</span><span class="p">(</span><span class="n">e</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Callback function invoked when the user changes the budget increment.
Computes a new number of budgets.</p>

            <details class="quote">
              <summary>Source code in <code>src/gui/budgets.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">inc_updated</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Callback function invoked when the user changes the budget increment.</span>
<span class="sd">    Computes a new number of budgets.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">c</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">COUNT_MIN</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_slider</span><span class="o">.</span><span class="n">value</span> <span class="o">//</span> <span class="bp">self</span><span class="o">.</span><span class="n">inc_slider</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
        <span class="n">c</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">COUNT_MAX</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">count_input</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">c</span>
    <span class="k">except</span> <span class="ne">ArithmeticError</span><span class="p">:</span>
        <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="src.gui.budgets.AdvancedBudgetBox.count_updated" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">count_updated</span><span class="p">(</span><span class="n">e</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Callback function invoked when the user changes the number of budget
levels.  Computes a new budget increment.</p>

            <details class="quote">
              <summary>Source code in <code>src/gui/budgets.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">count_updated</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Callback function invoked when the user changes the number of budget</span>
<span class="sd">    levels.  Computes a new budget increment.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">inc_slider</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_slider</span><span class="o">.</span><span class="n">value</span> <span class="o">//</span> <span class="bp">self</span><span class="o">.</span><span class="n">count_input</span><span class="o">.</span><span class="n">value</span>
    <span class="k">except</span> <span class="ne">ArithmeticError</span><span class="p">:</span>
        <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div><h2 id="downloadpane">DownloadPane</h2>


<div class="doc doc-object doc-class">




    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><span title="panel.Column">Column</span></code></p>


      <p>After OptiPass has completed the last optimization run the GUI creates
an instance of this class and saves it in the Download tab of the top 
level display.</p>

      <p>Check the output panel to see which plots were created and to enable the
net benefit plot if there is one.</p>
<p>The pane also has a form to allow the user to enter the name of the download
file, the format for the figures, and a button to click when they are ready
to download the data.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>op</code></b>
              –
              <div class="doc-md-description">
                <p>the OPResult object containing data tables and plots</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>
                  <details class="quote">
                    <summary>Source code in <code>src/gui/output.py</code></summary>
                    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">op</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Display a set of checkboxes for the user to select what sort of data to</span>
<span class="sd">    include in a zip file.  If the gate table is not empty enable table downloads.</span>
<span class="sd">    Check the output panel to see which plots were created and to enable the</span>
<span class="sd">    net benefit plot if there is one.</span>

<span class="sd">    The pane also has a form to allow the user to enter the name of the download</span>
<span class="sd">    file, the format for the figures, and a button to click when they are ready</span>
<span class="sd">    to download the data.</span>

<span class="sd">    Arguments:</span>
<span class="sd">      op:  the OPResult object containing data tables and plots</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">(</span><span class="n">DownloadPane</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">op</span> <span class="o">=</span> <span class="n">op</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">folder_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_make_folder_name</span><span class="p">()</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">grid</span> <span class="o">=</span> <span class="n">pn</span><span class="o">.</span><span class="n">GridBox</span><span class="p">(</span><span class="n">ncols</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">boxes</span> <span class="o">=</span> <span class="p">{</span> <span class="p">}</span>
    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">NB</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">BS</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">IT</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">BD</span><span class="p">]:</span>
        <span class="n">b</span> <span class="o">=</span> <span class="n">pn</span><span class="o">.</span><span class="n">widgets</span><span class="o">.</span><span class="n">Checkbox</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">styles</span><span class="o">=</span><span class="n">box_styles</span><span class="p">,</span> <span class="n">stylesheets</span><span class="o">=</span><span class="p">[</span><span class="n">box_style_sheet</span><span class="p">])</span>
        <span class="k">if</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">NB</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">IT</span><span class="p">]:</span>
            <span class="n">b</span><span class="o">.</span><span class="n">disabled</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="n">b</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">b</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">boxes</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="n">b</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">filename_input</span> <span class="o">=</span> <span class="n">pn</span><span class="o">.</span><span class="n">widgets</span><span class="o">.</span><span class="n">TextInput</span><span class="p">(</span>
        <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> 
        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">folder_name</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">image_type</span> <span class="o">=</span> <span class="n">pn</span><span class="o">.</span><span class="n">widgets</span><span class="o">.</span><span class="n">RadioBoxGroup</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;IFF&#39;</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;HTML&#39;</span><span class="p">,</span><span class="s1">&#39;PDF&#39;</span><span class="p">,</span><span class="s1">&#39;PNG&#39;</span><span class="p">,</span><span class="s1">&#39;JPEG&#39;</span><span class="p">],</span> <span class="n">inline</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">make_archive_button</span> <span class="o">=</span> <span class="n">pn</span><span class="o">.</span><span class="n">widgets</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Create Output Folder&#39;</span><span class="p">,</span> <span class="n">stylesheets</span><span class="o">=</span><span class="p">[</span><span class="n">button_style_sheet</span><span class="p">])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">make_archive_button</span><span class="o">.</span><span class="n">on_click</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_archive_cb</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pn</span><span class="o">.</span><span class="n">pane</span><span class="o">.</span><span class="n">HTML</span><span class="p">(</span><span class="s1">&#39;&lt;h3&gt;Save Outputs&lt;/h3&gt;&#39;</span><span class="p">,</span> <span class="n">styles</span><span class="o">=</span><span class="n">header_styles</span><span class="p">))</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">op</span><span class="o">.</span><span class="n">matrix</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pn</span><span class="o">.</span><span class="n">pane</span><span class="o">.</span><span class="n">HTML</span><span class="p">(</span><span class="s1">&#39;&lt;b&gt;Items to Include in the Output Folder:&lt;/b&gt;&#39;</span><span class="p">)),</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pn</span><span class="o">.</span><span class="n">Row</span><span class="p">(</span>
            <span class="n">pn</span><span class="o">.</span><span class="n">pane</span><span class="o">.</span><span class="n">HTML</span><span class="p">(</span><span class="s1">&#39;&lt;b&gt;Image File Format:&lt;/b&gt;&#39;</span><span class="p">),</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">image_type</span><span class="p">,</span>
            <span class="n">margin</span><span class="o">=</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span>
        <span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pn</span><span class="o">.</span><span class="n">Row</span><span class="p">(</span>
            <span class="n">pn</span><span class="o">.</span><span class="n">pane</span><span class="o">.</span><span class="n">HTML</span><span class="p">(</span><span class="s1">&#39;&lt;b&gt;Output Folder Name:&lt;/b&gt;&#39;</span><span class="p">),</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">filename_input</span><span class="p">,</span>
            <span class="n">margin</span><span class="o">=</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span>
        <span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">make_archive_button</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pn</span><span class="o">.</span><span class="n">pane</span><span class="o">.</span><span class="n">HTML</span><span class="p">(</span><span class="s1">&#39;&lt;p&gt;placeholder&lt;/p&gt;&#39;</span><span class="p">,</span> <span class="n">visible</span><span class="o">=</span><span class="kc">False</span><span class="p">))</span>

    <span class="c1"># if there are figures at least one of them is an individual target, so enable</span>
    <span class="c1"># that option; if there is a net benefit figure it&#39;s the first figure, enable it</span>
    <span class="c1"># if it&#39;s there</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">op</span><span class="o">.</span><span class="n">display_figures</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">op</span><span class="o">.</span><span class="n">display_figures</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Net&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">boxes</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">NB</span><span class="p">]</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">boxes</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">NB</span><span class="p">]</span><span class="o">.</span><span class="n">disabled</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">boxes</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">IT</span><span class="p">]</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">boxes</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">IT</span><span class="p">]</span><span class="o">.</span><span class="n">disabled</span> <span class="o">=</span> <span class="kc">False</span>
</code></pre></div></td></tr></table></div>
                  </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="src.gui.output.DownloadPane._make_folder_name" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">_make_folder_name</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>Use the region names, target names, and budget range to create the default name of the zip file.</p>

            <details class="quote">
              <summary>Source code in <code>src/gui/output.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">_make_folder_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Use the region names, target names, and budget range to create the default name of the zip file.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">parts</span> <span class="o">=</span> <span class="p">[</span><span class="n">s</span><span class="p">[:</span><span class="mi">3</span><span class="p">]</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">op</span><span class="o">.</span><span class="n">regions</span><span class="p">]</span>
    <span class="n">lst</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">op</span><span class="o">.</span><span class="n">targets</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">op</span><span class="o">.</span><span class="n">weights</span><span class="p">:</span>
        <span class="n">lst</span> <span class="o">=</span> <span class="p">[</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">lst</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="si">}</span><span class="s1">x</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">op</span><span class="o">.</span><span class="n">weights</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="si">}</span><span class="s1">&#39;</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">lst</span><span class="p">))]</span>
    <span class="n">parts</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">lst</span><span class="p">)</span>
    <span class="n">parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">OP</span><span class="o">.</span><span class="n">format_budget_amount</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">op</span><span class="o">.</span><span class="n">binc</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">op</span><span class="o">.</span><span class="n">bcount</span><span class="p">)[</span><span class="mi">1</span><span class="p">:])</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">op</span><span class="o">.</span><span class="n">mapping</span><span class="p">:</span>
        <span class="n">parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">op</span><span class="o">.</span><span class="n">mapping</span><span class="p">)</span>
    <span class="k">return</span> <span class="s1">&#39;_&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">parts</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="src.gui.output.DownloadPane._archive_cb" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">_archive_cb</span><span class="p">(</span><span class="n">e</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>Function called when the user clicks the Download button.  Create the output
folder and compress it.  When the archive is ready, display a FileDownload
widget with a button that starts the download.</p>

            <details class="quote">
              <summary>Source code in <code>src/gui/output.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">_archive_cb</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Function called when the user clicks the Download button.  Create the output</span>
<span class="sd">    folder and compress it.  When the archive is ready, display a FileDownload</span>
<span class="sd">    widget with a button that starts the download.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">any</span><span class="p">([</span><span class="n">x</span><span class="o">.</span><span class="n">value</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">boxes</span><span class="o">.</span><span class="n">values</span><span class="p">()]):</span>
        <span class="k">return</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">loading</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">base</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_make_archive_dir</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_save_files</span><span class="p">(</span><span class="n">base</span><span class="p">)</span>
    <span class="n">p</span> <span class="o">=</span> <span class="n">make_archive</span><span class="p">(</span><span class="n">base</span><span class="p">,</span> <span class="s1">&#39;zip&#39;</span><span class="p">,</span> <span class="n">base</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">loading</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="bp">self</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">pn</span><span class="o">.</span><span class="n">widgets</span><span class="o">.</span><span class="n">FileDownload</span><span class="p">(</span><span class="n">file</span><span class="o">=</span><span class="n">p</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">filename</span><span class="o">+</span><span class="s1">&#39;.zip&#39;</span><span class="p">,</span> <span class="n">stylesheets</span><span class="o">=</span><span class="p">[</span><span class="n">button_style_sheet</span><span class="p">])</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="src.gui.output.DownloadPane._make_archive_dir" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">_make_archive_dir</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>Create an empty directory for the download, using the name in the form.</p>

            <details class="quote">
              <summary>Source code in <code>src/gui/output.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">_make_archive_dir</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create an empty directory for the download, using the name in the form.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">filename</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">filename_input</span><span class="o">.</span><span class="n">value_input</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">filename_input</span><span class="o">.</span><span class="n">value</span>
    <span class="n">archive_dir</span> <span class="o">=</span> <span class="n">Path</span><span class="o">.</span><span class="n">cwd</span><span class="p">()</span> <span class="o">/</span> <span class="s1">&#39;tmp&#39;</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">filename</span>
    <span class="k">if</span> <span class="n">Path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">archive_dir</span><span class="p">):</span>
        <span class="n">rmtree</span><span class="p">(</span><span class="n">archive_dir</span><span class="p">)</span>
    <span class="n">Path</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">archive_dir</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">archive_dir</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="src.gui.output.DownloadPane._save_files" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">_save_files</span><span class="p">(</span><span class="n">loc</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>Write the tables and figures to the download directory.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>loc</code></b>
              –
              <div class="doc-md-description">
                <p>the path to the directory.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>
            <details class="quote">
              <summary>Source code in <code>src/gui/output.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">_save_files</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">loc</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Write the tables and figures to the download directory.</span>

<span class="sd">    Arguments:</span>
<span class="sd">      loc:  the path to the directory.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">figures</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">op</span><span class="o">.</span><span class="n">display_figures</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">image_type</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="s1">&#39;HTML&#39;</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">op</span><span class="o">.</span><span class="n">download_figures</span>
    <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">fig</span> <span class="ow">in</span> <span class="n">figures</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;Net&#39;</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">boxes</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">NB</span><span class="p">]</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="n">name</span> <span class="o">!=</span> <span class="s1">&#39;Net&#39;</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">boxes</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">IT</span><span class="p">]</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">image_type</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="s1">&#39;HTML&#39;</span><span class="p">:</span>
            <span class="n">savehtml</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="n">loc</span><span class="o">/</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s1">.html&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">ext</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">image_type</span><span class="o">.</span><span class="n">value</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
            <span class="n">fn</span> <span class="o">=</span> <span class="n">loc</span><span class="o">/</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s1">.</span><span class="si">{</span><span class="n">ext</span><span class="si">}</span><span class="s1">&#39;</span>
            <span class="n">fig</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">fn</span><span class="p">,</span> <span class="n">bbox_inches</span><span class="o">=</span><span class="s1">&#39;tight&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">boxes</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">BS</span><span class="p">]</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
        <span class="n">df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">op</span><span class="o">.</span><span class="n">summary</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s1">&#39;gates&#39;</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">df</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span>
            <span class="n">loc</span><span class="o">/</span><span class="s1">&#39;budget_summary.csv&#39;</span><span class="p">,</span> 
            <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">float_format</span><span class="o">=</span><span class="k">lambda</span> <span class="n">n</span><span class="p">:</span> <span class="nb">round</span><span class="p">(</span><span class="n">n</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
        <span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">boxes</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">BD</span><span class="p">]</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">op</span><span class="o">.</span><span class="n">matrix</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span>
            <span class="n">loc</span><span class="o">/</span><span class="s1">&#39;barrier_details.csv&#39;</span><span class="p">,</span>
            <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">float_format</span><span class="o">=</span><span class="k">lambda</span> <span class="n">n</span><span class="p">:</span> <span class="nb">round</span><span class="p">(</span><span class="n">n</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div><h2 id="infobox">InfoBox</h2>


<div class="doc doc-object doc-class">




    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><span title="panel.Column">Column</span></code></p>


      <p>When the user clicks the Run Optimizer button in the Start panel
the GUI displays a message by calling one of the methods in 
this class.  Messages are displayed in the modal dialog area
defined by the GUI template.</p>



<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>template</code></b>
              –
              <div class="doc-md-description">
                <p>the application template (which contains the modal dialog area to use)</p>
              </div>
            </li>
            <li>
              <b><code>run_cb</code></b>
              –
              <div class="doc-md-description">
                <p>a callback function to invoke after the user reviews settings and clicks "Continue"</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>
                  <details class="quote">
                    <summary>Source code in <code>src/gui/infobox.py</code></summary>
                    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">template</span><span class="p">,</span> <span class="n">run_cb</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initialize the module.</span>

<span class="sd">    Arguments:</span>
<span class="sd">      template:  the application template (which contains the modal dialog area to use)</span>
<span class="sd">      run_cb:  a callback function to invoke after the user reviews settings and clicks &quot;Continue&quot;</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">(</span><span class="n">InfoBox</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">template</span> <span class="o">=</span> <span class="n">template</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">continue_button</span> <span class="o">=</span> <span class="n">pn</span><span class="o">.</span><span class="n">widgets</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Continue&#39;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">continue_button</span><span class="o">.</span><span class="n">on_click</span><span class="p">(</span><span class="n">run_cb</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">cancel_button</span> <span class="o">=</span> <span class="n">pn</span><span class="o">.</span><span class="n">widgets</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Cancel&#39;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">cancel_button</span><span class="o">.</span><span class="n">on_click</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cancel_cb</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
                  </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="src.gui.infobox.InfoBox._cancel_cb" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">_cancel_cb</span><span class="p">(</span><span class="n">_</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>Close the dialog when the user clicks the "Cancel" button.</p>

            <details class="quote">
              <summary>Source code in <code>src/gui/infobox.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">_cancel_cb</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Close the dialog when the user clicks the &quot;Cancel&quot; button.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">template</span><span class="o">.</span><span class="n">close_modal</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="src.gui.infobox.InfoBox.show_missing" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">show_missing</span><span class="p">(</span><span class="n">rlist</span><span class="p">,</span> <span class="n">budget</span><span class="p">,</span> <span class="n">tlist</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>Method called by the OP class when it detects missing parameters (e.g.
if the user did not select a region or a target).</p>

            <details class="quote">
              <summary>Source code in <code>src/gui/infobox.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">show_missing</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rlist</span><span class="p">,</span> <span class="n">budget</span><span class="p">,</span> <span class="n">tlist</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Method called by the OP class when it detects missing parameters (e.g.</span>
<span class="sd">    if the user did not select a region or a target).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">missing_params_text</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">rlist</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">text</span> <span class="o">+=</span> <span class="s1">&#39; * one or more geographic regions</span><span class="se">\n</span><span class="s1">&#39;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">budget</span><span class="p">:</span>
        <span class="n">text</span> <span class="o">+=</span> <span class="s1">&#39; * a maximum budget</span><span class="se">\n</span><span class="s1">&#39;</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">tlist</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">text</span> <span class="o">+=</span> <span class="s1">&#39; * one or more targets</span><span class="se">\n</span><span class="s1">&#39;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pn</span><span class="o">.</span><span class="n">pane</span><span class="o">.</span><span class="n">Alert</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">alert_type</span> <span class="o">=</span> <span class="s1">&#39;warning&#39;</span><span class="p">))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">template</span><span class="o">.</span><span class="n">open_modal</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="src.gui.infobox.InfoBox.show_invalid_weights" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">show_invalid_weights</span><span class="p">(</span><span class="n">w</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>Method called when weighted targets are being used and one of the
text boxes does not have a valid entry (must be a number between 1 and 5).</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>w</code></b>
                  (<code>list[str]</code>)
              –
              <div class="doc-md-description">
                <p>the list of strings read from the text entry widgets</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>
            <details class="quote">
              <summary>Source code in <code>src/gui/infobox.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">show_invalid_weights</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">w</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Method called when weighted targets are being used and one of the</span>
<span class="sd">    text boxes does not have a valid entry (must be a number between 1 and 5).</span>

<span class="sd">    Arguments:</span>
<span class="sd">      w: the list of strings read from the text entry widgets</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">invalid_weights_text</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">w</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pn</span><span class="o">.</span><span class="n">pane</span><span class="o">.</span><span class="n">Alert</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">alert_type</span> <span class="o">=</span> <span class="s1">&#39;warning&#39;</span><span class="p">))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">template</span><span class="o">.</span><span class="n">open_modal</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="src.gui.infobox.InfoBox.show_params" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">show_params</span><span class="p">(</span><span class="n">regions</span><span class="p">,</span> <span class="n">budgets</span><span class="p">,</span> <span class="n">targets</span><span class="p">,</span> <span class="n">weights</span><span class="p">,</span> <span class="n">mapping</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>Method called to allow the user to review the optimization parameters read from the
various widgets.  Displays each parameter and two buttons ("Cancel" and "Continue").</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>regions</code></b>
              –
              <div class="doc-md-description">
                <p>list of region names</p>
              </div>
            </li>
            <li>
              <b><code>budgets</code></b>
              –
              <div class="doc-md-description">
                <p>a tuple with starting budget, increment, and count</p>
              </div>
            </li>
            <li>
              <b><code>targets</code></b>
              –
              <div class="doc-md-description">
                <p>list of restoration target names</p>
              </div>
            </li>
            <li>
              <b><code>weights</code></b>
              –
              <div class="doc-md-description">
                <p>list of target weights (optional)</p>
              </div>
            </li>
            <li>
              <b><code>mapping</code></b>
              –
              <div class="doc-md-description">
                <p>column mappings (optional)</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>
            <details class="quote">
              <summary>Source code in <code>src/gui/infobox.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">show_params</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">regions</span><span class="p">,</span> <span class="n">budgets</span><span class="p">,</span> <span class="n">targets</span><span class="p">,</span> <span class="n">weights</span><span class="p">,</span> <span class="n">mapping</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Method called to allow the user to review the optimization parameters read from the</span>
<span class="sd">    various widgets.  Displays each parameter and two buttons (&quot;Cancel&quot; and &quot;Continue&quot;).</span>

<span class="sd">    Arguments:</span>
<span class="sd">      regions:  list of region names</span>
<span class="sd">      budgets:  a tuple with starting budget, increment, and count</span>
<span class="sd">      targets:  list of restoration target names</span>
<span class="sd">      weights:  list of target weights (optional)</span>
<span class="sd">      mapping:  column mappings (optional)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">bstart</span><span class="p">,</span> <span class="n">binc</span><span class="p">,</span> <span class="n">bcount</span> <span class="o">=</span> <span class="n">budgets</span>
    <span class="n">fbmax</span> <span class="o">=</span> <span class="n">OP</span><span class="o">.</span><span class="n">format_budget_amount</span><span class="p">(</span><span class="n">binc</span><span class="o">*</span><span class="n">bcount</span><span class="p">)</span>
    <span class="n">fbstep</span> <span class="o">=</span> <span class="n">OP</span><span class="o">.</span><span class="n">format_budget_amount</span><span class="p">(</span><span class="n">binc</span><span class="p">)</span>
    <span class="n">fbstart</span> <span class="o">=</span> <span class="n">OP</span><span class="o">.</span><span class="n">format_budget_amount</span><span class="p">(</span><span class="n">bstart</span><span class="p">)</span>
    <span class="n">text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">preview_message_text</span>
    <span class="n">text</span> <span class="o">+=</span> <span class="sa">f</span><span class="s1">&#39;  * Regions: </span><span class="si">{</span><span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">regions</span><span class="p">)</span><span class="si">}</span><span class="se">\n\n</span><span class="s1">&#39;</span>
    <span class="k">if</span> <span class="n">bcount</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">text</span> <span class="o">+=</span> <span class="sa">f</span><span class="s1">&#39;  * </span><span class="si">{</span><span class="n">bcount</span><span class="si">}</span><span class="s1"> budget levels from </span><span class="si">{</span><span class="n">fbstep</span><span class="si">}</span><span class="s1"> up to </span><span class="si">{</span><span class="n">fbmax</span><span class="si">}</span><span class="s1"> in increments of </span><span class="si">{</span><span class="n">fbstep</span><span class="si">}</span><span class="se">\n\n</span><span class="s1">&#39;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">text</span> <span class="o">+=</span> <span class="sa">f</span><span class="s1">&#39;  * a single budget of </span><span class="si">{</span><span class="n">fbstart</span><span class="si">}</span><span class="se">\n\n</span><span class="s1">&#39;</span>
    <span class="n">targets</span> <span class="o">=</span> <span class="p">[</span><span class="n">t</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;:&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">targets</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">weights</span><span class="p">:</span>
        <span class="n">targets</span> <span class="o">=</span> <span class="p">[</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">targets</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="si">}</span><span class="s1"> ⨉ </span><span class="si">{</span><span class="n">weights</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="si">}</span><span class="s1">&#39;</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">targets</span><span class="p">))]</span>
    <span class="n">text</span> <span class="o">+=</span> <span class="sa">f</span><span class="s1">&#39;  * Targets: </span><span class="si">{</span><span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">targets</span><span class="p">)</span><span class="si">}</span><span class="se">\n</span><span class="s1">&#39;</span> 
    <span class="n">text</span> <span class="o">+=</span> <span class="sa">f</span><span class="s1">&#39;  * Mapping: </span><span class="si">{</span><span class="n">mapping</span><span class="si">}</span><span class="se">\n\n</span><span class="s1">&#39;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pn</span><span class="o">.</span><span class="n">pane</span><span class="o">.</span><span class="n">Alert</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">alert_type</span> <span class="o">=</span> <span class="s1">&#39;secondary&#39;</span><span class="p">))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pn</span><span class="o">.</span><span class="n">Row</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cancel_button</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">continue_button</span><span class="p">))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">template</span><span class="o">.</span><span class="n">open_modal</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="src.gui.infobox.InfoBox.show_success" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">show_success</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>Method called after OptiPass has finished running and the results have been
parsed successfully.</p>

            <details class="quote">
              <summary>Source code in <code>src/gui/infobox.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">show_success</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Method called after OptiPass has finished running and the results have been</span>
<span class="sd">    parsed successfully.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pn</span><span class="o">.</span><span class="n">pane</span><span class="o">.</span><span class="n">Alert</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">success_text</span><span class="p">,</span> <span class="n">alert_type</span> <span class="o">=</span> <span class="s1">&#39;success&#39;</span><span class="p">))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">template</span><span class="o">.</span><span class="n">open_modal</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="src.gui.infobox.InfoBox.show_fail" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">show_fail</span><span class="p">(</span><span class="n">reason</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>Method called if OptiPass failed.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>reason</code></b>
              –
              <div class="doc-md-description">
                <p>string containing the error message</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>
            <details class="quote">
              <summary>Source code in <code>src/gui/infobox.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">show_fail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">reason</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Method called if OptiPass failed.</span>

<span class="sd">    Arguments:</span>
<span class="sd">      reason:  string containing the error message</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
    <span class="n">text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fail_text</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">reason</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">str</span><span class="p">(</span><span class="n">reason</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;No solution&#39;</span><span class="p">:</span>
        <span class="n">text</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1"> * try increasing the maximum budget&#39;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pn</span><span class="o">.</span><span class="n">pane</span><span class="o">.</span><span class="n">Alert</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">alert_type</span> <span class="o">=</span> <span class="s1">&#39;danger&#39;</span><span class="p">))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">template</span><span class="o">.</span><span class="n">open_modal</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div><h2 id="outputpane">OutputPane</h2>


<div class="doc doc-object doc-class">




    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><span title="panel.Column">Column</span></code></p>


      <p>After OptiPass has completed the last optimization run the GUI creates
an instance of this class and saves it in the Output tab of the top 
level display.</p>

      <p>(displayed in a tab widget showing one figure at a time), the second
part has tables showing data about barriers included in solutions.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>op</code></b>
              –
              <div class="doc-md-description">
                <p>an OPResult object with the optimization parameters and results</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>
                  <details class="quote">
                    <summary>Source code in <code>src/gui/output.py</code></summary>
                    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">op</span><span class="p">,</span> <span class="n">tgmap</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Format the output from OptiPass.</span>
<span class="sd">    The first part of the panel has a set of ROI curves</span>
<span class="sd">    (displayed in a tab widget showing one figure at a time), the second</span>
<span class="sd">    part has tables showing data about barriers included in solutions.</span>

<span class="sd">    Arguments:</span>
<span class="sd">      op: an OPResult object with the optimization parameters and results</span>
<span class="sd">     &quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">(</span><span class="n">OutputPane</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pn</span><span class="o">.</span><span class="n">pane</span><span class="o">.</span><span class="n">HTML</span><span class="p">(</span><span class="s1">&#39;&lt;h3&gt;Optimization Results&lt;/h3&gt;&#39;</span><span class="p">,</span> <span class="n">styles</span><span class="o">=</span><span class="n">header_styles</span><span class="p">))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_make_title</span><span class="p">(</span><span class="n">op</span><span class="p">))</span>

    <span class="k">if</span> <span class="n">op</span><span class="o">.</span><span class="n">bcount</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pn</span><span class="o">.</span><span class="n">pane</span><span class="o">.</span><span class="n">HTML</span><span class="p">(</span><span class="s1">&#39;&lt;h3&gt;ROI Curves&lt;/h3&gt;&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_make_figures_tab</span><span class="p">(</span><span class="n">op</span><span class="p">))</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pn</span><span class="o">.</span><span class="n">pane</span><span class="o">.</span><span class="n">HTML</span><span class="p">(</span><span class="s1">&#39;&lt;h3&gt;Budget Summary&lt;/h3&gt;&#39;</span><span class="p">))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">gate_count</span> <span class="o">=</span> <span class="n">op</span><span class="o">.</span><span class="n">summary</span><span class="o">.</span><span class="n">gates</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="nb">len</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gate_count</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pn</span><span class="o">.</span><span class="n">pane</span><span class="o">.</span><span class="n">HTML</span><span class="p">(</span><span class="s1">&#39;&lt;i&gt;No barriers selected -- consider increasing the budget&lt;/i&gt;&#39;</span><span class="p">))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_make_budget_table</span><span class="p">(</span><span class="n">op</span><span class="p">,</span> <span class="n">tgmap</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pn</span><span class="o">.</span><span class="n">Accordion</span><span class="p">(</span>
            <span class="p">(</span><span class="s1">&#39;Barrier Details&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_make_gate_table</span><span class="p">(</span><span class="n">op</span><span class="p">)),</span>
            <span class="n">stylesheets</span> <span class="o">=</span> <span class="p">[</span><span class="n">accordion_style_sheet</span><span class="p">],</span>
        <span class="p">))</span>
</code></pre></div></td></tr></table></div>
                  </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="src.gui.output.OutputPane._make_title" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">_make_title</span><span class="p">(</span><span class="n">op</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>The top section of the output pane is a title showing the optimization parameters.</p>

            <details class="quote">
              <summary>Source code in <code>src/gui/output.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">_make_title</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">op</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The top section of the output pane is a title showing the optimization parameters.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">tnames</span> <span class="o">=</span> <span class="p">[</span><span class="n">OP</span><span class="o">.</span><span class="n">target_frame</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">t</span><span class="p">]</span><span class="o">.</span><span class="n">short</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">op</span><span class="o">.</span><span class="n">targets</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">op</span><span class="o">.</span><span class="n">weights</span><span class="p">:</span>
        <span class="n">tnames</span> <span class="o">=</span> <span class="p">[</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">tnames</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="si">}</span><span class="s1"> ⨉ </span><span class="si">{</span><span class="n">op</span><span class="o">.</span><span class="n">weights</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="si">}</span><span class="s1">&#39;</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">tnames</span><span class="p">))]</span>

    <span class="n">title</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&lt;p&gt;&lt;b&gt;Regions:&lt;/b&gt; </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">op</span><span class="o">.</span><span class="n">regions</span><span class="p">)</span><span class="si">}</span><span class="s2">;&quot;</span>
    <span class="n">title</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot; &lt;b&gt;Targets:&lt;/b&gt; </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">tnames</span><span class="p">)</span><span class="si">}</span><span class="s2">;&quot;</span>
    <span class="k">if</span> <span class="n">s</span> <span class="o">:=</span> <span class="n">OP</span><span class="o">.</span><span class="n">mapping_name</span><span class="p">:</span>
        <span class="n">title</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot; &lt;b&gt;</span><span class="si">{</span><span class="n">s</span><span class="o">.</span><span class="n">capitalize</span><span class="p">()</span><span class="si">}</span><span class="s2">:&lt;/b&gt; </span><span class="si">{</span><span class="n">op</span><span class="o">.</span><span class="n">mapping</span><span class="si">}</span><span class="s2">;&quot;</span>
    <span class="k">if</span> <span class="n">op</span><span class="o">.</span><span class="n">bcount</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">bmax</span> <span class="o">=</span> <span class="n">op</span><span class="o">.</span><span class="n">binc</span> <span class="o">*</span> <span class="n">op</span><span class="o">.</span><span class="n">bcount</span>
        <span class="n">smin</span> <span class="o">=</span> <span class="n">OP</span><span class="o">.</span><span class="n">format_budget_amount</span><span class="p">(</span><span class="n">op</span><span class="o">.</span><span class="n">binc</span><span class="p">)</span>
        <span class="n">smax</span> <span class="o">=</span> <span class="n">OP</span><span class="o">.</span><span class="n">format_budget_amount</span><span class="p">(</span><span class="n">bmax</span><span class="p">)</span>
        <span class="n">title</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot; &lt;b&gt;Budgets:&lt;/b&gt; </span><span class="si">{</span><span class="n">smin</span><span class="si">}</span><span class="s2"> to </span><span class="si">{</span><span class="n">smax</span><span class="si">}</span><span class="s2">&lt;/p&gt;&quot;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">b</span> <span class="o">=</span> <span class="n">OP</span><span class="o">.</span><span class="n">format_budget_amount</span><span class="p">(</span><span class="n">op</span><span class="o">.</span><span class="n">bmin</span><span class="p">),</span>
        <span class="n">title</span> <span class="o">+=</span> <span class="s2">&quot; &lt;b&gt;Budget:&lt;/b&gt; </span><span class="si">{b}</span><span class="s2">&lt;/p&gt;&quot;</span>
    <span class="k">return</span> <span class="n">pn</span><span class="o">.</span><span class="n">pane</span><span class="o">.</span><span class="n">HTML</span><span class="p">(</span><span class="n">title</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="src.gui.output.OutputPane._make_figures_tab" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">_make_figures_tab</span><span class="p">(</span><span class="n">op</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>Create a Tabs object with one tab for each ROI curve.</p>

            <details class="quote">
              <summary>Source code in <code>src/gui/output.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">_make_figures_tab</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">op</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create a Tabs object with one tab for each ROI curve.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">tabs</span> <span class="o">=</span> <span class="n">pn</span><span class="o">.</span><span class="n">Tabs</span><span class="p">(</span>
        <span class="n">tabs_location</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">,</span>
        <span class="n">stylesheets</span> <span class="o">=</span> <span class="p">[</span><span class="n">output_tab_style_sheet</span><span class="p">],</span>
    <span class="p">)</span>
    <span class="n">op</span><span class="o">.</span><span class="n">make_roi_curves</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">op</span><span class="o">.</span><span class="n">display_figures</span><span class="p">:</span>
        <span class="n">tabs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">tabs</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="src.gui.output.OutputPane._make_budget_table" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">_make_budget_table</span><span class="p">(</span><span class="n">op</span><span class="p">,</span> <span class="n">tgmap</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>Make the table of benefits for each budget.  Attach
a callback function that is called when the user clicks on a row
in the table (the callback updates the map to show gates used in a
solution).</p>

            <details class="quote">
              <summary>Source code in <code>src/gui/output.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">_make_budget_table</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">op</span><span class="p">,</span> <span class="n">tgmap</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Make the table of benefits for each budget.  Attach</span>
<span class="sd">    a callback function that is called when the user clicks on a row</span>
<span class="sd">    in the table (the callback updates the map to show gates used in a</span>
<span class="sd">    solution).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">op</span><span class="o">.</span><span class="n">budget_table</span><span class="p">()</span>
    <span class="n">formatters</span> <span class="o">=</span> <span class="p">{</span> <span class="n">col</span><span class="p">:</span> <span class="n">NumberFormatter</span><span class="p">(</span><span class="nb">format</span><span class="o">=</span><span class="s1">&#39;0.0&#39;</span><span class="p">,</span> <span class="n">text_align</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span> <span class="p">}</span>
    <span class="n">formatters</span><span class="p">[</span><span class="s1">&#39;Budget&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;money&#39;</span><span class="p">,</span> <span class="s1">&#39;symbol&#39;</span><span class="p">:</span> <span class="s1">&#39;$&#39;</span><span class="p">,</span> <span class="s1">&#39;precision&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">}</span>
    <span class="n">formatters</span><span class="p">[</span><span class="s1">&#39;# Barriers&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">NumberFormatter</span><span class="p">(</span><span class="nb">format</span><span class="o">=</span><span class="s1">&#39;0&#39;</span><span class="p">,</span> <span class="n">text_align</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">)</span>
    <span class="n">alignment</span> <span class="o">=</span> <span class="p">{</span> 
        <span class="s1">&#39;Budget&#39;</span><span class="p">:</span> <span class="s1">&#39;right&#39;</span><span class="p">,</span>
        <span class="s1">&#39;Net Gain&#39;</span><span class="p">:</span> <span class="s1">&#39;center&#39;</span><span class="p">,</span>
        <span class="s1">&#39;# Barriers&#39;</span><span class="p">:</span> <span class="s1">&#39;center&#39;</span>
    <span class="p">}</span>

    <span class="n">table</span> <span class="o">=</span> <span class="n">pn</span><span class="o">.</span><span class="n">widgets</span><span class="o">.</span><span class="n">Tabulator</span><span class="p">(</span>
        <span class="n">df</span><span class="p">,</span>
        <span class="n">show_index</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">hidden_columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;gates&#39;</span><span class="p">],</span>
        <span class="n">editors</span> <span class="o">=</span> <span class="p">{</span> <span class="n">c</span><span class="p">:</span> <span class="kc">None</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span> <span class="p">},</span>
        <span class="n">text_align</span> <span class="o">=</span> <span class="n">alignment</span><span class="p">,</span>
        <span class="n">header_align</span> <span class="o">=</span> <span class="p">{</span><span class="n">c</span><span class="p">:</span> <span class="s1">&#39;center&#39;</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">},</span>
        <span class="n">formatters</span> <span class="o">=</span> <span class="n">formatters</span><span class="p">,</span>
        <span class="n">selectable</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">configuration</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;columnDefaults&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;headerSort&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">}},</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">budget_table</span> <span class="o">=</span> <span class="n">df</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">make_dots</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="n">op</span><span class="p">,</span> <span class="n">tgmap</span><span class="p">)</span>
    <span class="n">table</span><span class="o">.</span><span class="n">on_click</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">budget_table_cb</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">table</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="src.gui.output.OutputPane._make_gate_table" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">_make_gate_table</span><span class="p">(</span><span class="n">op</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>Make a table showing details about gates used in solutions.</p>

            <details class="quote">
              <summary>Source code in <code>src/gui/output.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">_make_gate_table</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">op</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Make a table showing details about gates used in solutions.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">formatters</span> <span class="o">=</span> <span class="p">{</span> <span class="p">}</span>
    <span class="n">alignment</span> <span class="o">=</span> <span class="p">{</span> <span class="p">}</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">op</span><span class="o">.</span><span class="n">gate_table</span><span class="p">()</span>

    <span class="n">df</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="n">OP</span><span class="o">.</span><span class="n">format_budget_amount</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">s</span><span class="p">))</span> <span class="k">if</span> <span class="n">s</span><span class="o">.</span><span class="n">isdigit</span><span class="p">()</span> <span class="k">else</span> <span class="n">s</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">]</span>

    <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">col</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;$&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="n">col</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;Primary&#39;</span><span class="p">,</span><span class="s1">&#39;Dominant&#39;</span><span class="p">]:</span>
            <span class="n">formatters</span><span class="p">[</span><span class="n">col</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;tickCross&#39;</span><span class="p">,</span> <span class="s1">&#39;crossElement&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">}</span>
            <span class="n">alignment</span><span class="p">[</span><span class="n">col</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;center&#39;</span>
        <span class="k">elif</span> <span class="n">col</span> <span class="o">==</span> <span class="s1">&#39;Cost&#39;</span><span class="p">:</span>
            <span class="n">formatters</span><span class="p">[</span><span class="n">col</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;money&#39;</span><span class="p">,</span> <span class="s1">&#39;symbol&#39;</span><span class="p">:</span> <span class="s1">&#39;$&#39;</span><span class="p">,</span> <span class="s1">&#39;precision&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">}</span>
            <span class="n">alignment</span><span class="p">[</span><span class="n">col</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;right&#39;</span>

    <span class="n">table</span> <span class="o">=</span> <span class="n">pn</span><span class="o">.</span><span class="n">widgets</span><span class="o">.</span><span class="n">Tabulator</span><span class="p">(</span>
        <span class="n">df</span><span class="p">,</span> 
        <span class="n">show_index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> 
        <span class="n">frozen_columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;ID&#39;</span><span class="p">],</span>
        <span class="n">hidden_columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;count&#39;</span><span class="p">],</span>
        <span class="n">formatters</span><span class="o">=</span><span class="n">formatters</span><span class="p">,</span>
        <span class="n">text_align</span><span class="o">=</span><span class="n">alignment</span><span class="p">,</span>
        <span class="n">configuration</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;columnDefaults&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;headerSort&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">}},</span>
        <span class="n">header_align</span><span class="o">=</span><span class="p">{</span><span class="n">c</span><span class="p">:</span> <span class="s1">&#39;center&#39;</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">},</span>
        <span class="n">selectable</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">table</span><span class="o">.</span><span class="n">disabled</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">gate_table</span> <span class="o">=</span> <span class="n">df</span>
    <span class="k">return</span> <span class="n">table</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="src.gui.output.OutputPane.make_dots" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">make_dots</span><span class="p">(</span><span class="n">plot</span><span class="p">,</span> <span class="n">op</span><span class="p">,</span> <span class="n">tgmap</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>Called after the output panel is initialized, make a set of glyphs to display
for each budget level.</p>

            <details class="quote">
              <summary>Source code in <code>src/gui/output.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">make_dots</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">plot</span><span class="p">,</span> <span class="n">op</span><span class="p">,</span> <span class="n">tgmap</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Called after the output panel is initialized, make a set of glyphs to display</span>
<span class="sd">    for each budget level.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">selected_row</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">dots</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">budget_table</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">tgmap</span><span class="o">.</span><span class="n">map_coords</span><span class="p">()</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">row</span><span class="o">.</span><span class="n">gates</span><span class="p">]</span>
        <span class="n">c</span> <span class="o">=</span> <span class="n">tgmap</span><span class="o">.</span><span class="n">map</span><span class="o">.</span><span class="n">circle_dot</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span> <span class="n">line_color</span><span class="o">=</span><span class="s1">&#39;blue&#39;</span><span class="p">,</span> <span class="n">fill_color</span><span class="o">=</span><span class="s1">&#39;white&#39;</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">df</span><span class="p">)</span>
        <span class="n">c</span><span class="o">.</span><span class="n">visible</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dots</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="src.gui.output.OutputPane.budget_table_cb" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">budget_table_cb</span><span class="p">(</span><span class="n">e</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>The callback function invoked when the user clicks a row in the budget table.
Use the event to figure out which row was clicked.  Hide any dots that were displayed
previously, then make the dots for the selected row visible.</p>

            <details class="quote">
              <summary>Source code in <code>src/gui/output.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">budget_table_cb</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The callback function invoked when the user clicks a row in the budget table.</span>
<span class="sd">    Use the event to figure out which row was clicked.  Hide any dots that were displayed</span>
<span class="sd">    previously, then make the dots for the selected row visible.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">n</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">selected_row</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dots</span><span class="p">[</span><span class="n">n</span><span class="p">]</span><span class="o">.</span><span class="n">visible</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">selected_row</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">row</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">dots</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">selected_row</span><span class="p">]</span><span class="o">.</span><span class="n">visible</span> <span class="o">=</span> <span class="kc">True</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="src.gui.output.OutputPane.hide_dots" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">hide_dots</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>Callback function invoked when users click on a region name in the start panel to hide
any dots that might be on the map.</p>

            <details class="quote">
              <summary>Source code in <code>src/gui/output.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">hide_dots</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Callback function invoked when users click on a region name in the start panel to hide</span>
<span class="sd">    any dots that might be on the map.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">selected_row</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dots</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">selected_row</span><span class="p">]</span><span class="o">.</span><span class="n">visible</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">selected_row</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div><h2 id="regionbox">RegionBox</h2>


<div class="doc doc-object doc-class">




    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><span title="panel.Column">Column</span></code></p>


      <p>The region box displays the names of each geographic region in the data set,
with a checkbox next to the name.  </p>
<p>When the user clicks on one of the checkboxes
several actions are triggered:  the set of selected regions is updated, the
budget widget is notified so it can update the maximum budget (based on the total
cost of all barriers in the current selection), and the map is updated by zooming
in to a level that contains only the barriers in the selected regions.</p>



<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>map</code></b>
              –
              <div class="doc-md-description">
                <p>the TGMap object that will be updated when regions are selected</p>
              </div>
            </li>
            <li>
              <b><code>budget</code></b>
              –
              <div class="doc-md-description">
                <p>the BudgetBox object to update when regions are selected</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>
                  <details class="quote">
                    <summary>Source code in <code>src/gui/regionbox.py</code></summary>
                    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">map</span><span class="p">,</span> <span class="n">budget</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create the grid of checkboxes and set up the callback function.</span>

<span class="sd">    Arguments:</span>
<span class="sd">      map:  the TGMap object that will be updated when regions are selected</span>
<span class="sd">      budget:  the BudgetBox object to update when regions are selected</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">(</span><span class="n">RegionBox</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">margin</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">5</span><span class="p">))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">map</span> <span class="o">=</span> <span class="nb">map</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">budget_box</span> <span class="o">=</span> <span class="n">budget</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">boxes</span> <span class="o">=</span> <span class="p">{</span> <span class="p">}</span>
    <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">OP</span><span class="o">.</span><span class="n">region_names</span><span class="p">:</span>
        <span class="n">box</span> <span class="o">=</span> <span class="n">pn</span><span class="o">.</span><span class="n">widgets</span><span class="o">.</span><span class="n">Checkbox</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">styles</span><span class="o">=</span><span class="n">box_styles</span><span class="p">,</span> <span class="n">stylesheets</span><span class="o">=</span><span class="p">[</span><span class="n">box_style_sheet</span><span class="p">])</span>
        <span class="n">box</span><span class="o">.</span><span class="n">param</span><span class="o">.</span><span class="n">watch</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cb</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;value&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">boxes</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">box</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">selected</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">external_cb</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pn</span><span class="o">.</span><span class="n">GridBox</span><span class="p">(</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">boxes</span><span class="o">.</span><span class="n">values</span><span class="p">(),</span> <span class="n">ncols</span><span class="o">=</span><span class="mi">3</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
                  </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="src.gui.regionbox.RegionBox.cb" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">cb</span><span class="p">(</span><span class="o">*</span><span class="n">events</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>Callback function invoked when one of the checkboxes is clicked.  If the new state
of the checkbox is 'selected' the region is added to the set of selected regions,
otherwise it is removed.  After updating the set notify the map widget and any
other widgets that have been registered as external callbacks.</p>

            <details class="quote">
              <summary>Source code in <code>src/gui/regionbox.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">cb</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">events</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Callback function invoked when one of the checkboxes is clicked.  If the new state</span>
<span class="sd">    of the checkbox is &#39;selected&#39; the region is added to the set of selected regions,</span>
<span class="sd">    otherwise it is removed.  After updating the set notify the map widget and any</span>
<span class="sd">    other widgets that have been registered as external callbacks.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">events</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">e</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s1">&#39;changed&#39;</span><span class="p">:</span>
            <span class="n">r</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">name</span>
            <span class="k">if</span> <span class="n">e</span><span class="o">.</span><span class="n">new</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">selected</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">selected</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>
            <span class="n">amount</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">OP</span><span class="o">.</span><span class="n">total_cost</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">selected</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">budget_box</span><span class="o">.</span><span class="n">set_budget_max</span><span class="p">(</span><span class="n">amount</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">map</span><span class="o">.</span><span class="n">display_regions</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">selected</span><span class="p">)</span>
    <span class="c1"># self.map.zoom(self.selected)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">external_cb</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">external_cb</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="src.gui.regionbox.RegionBox.check" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">check</span><span class="p">(</span><span class="n">region</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>Initialize the box by addidng region to the selection.</p>

            <details class="quote">
              <summary>Source code in <code>src/gui/regionbox.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">check</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">region</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initialize the box by addidng region to the selection.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">boxes</span><span class="p">[</span><span class="n">region</span><span class="p">]</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="kc">True</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="src.gui.regionbox.RegionBox.selection" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">selection</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>Return a list of the names of currently selected regions.</p>

            <details class="quote">
              <summary>Source code in <code>src/gui/regionbox.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">selection</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return a list of the names of currently selected regions.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">selected</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="src.gui.regionbox.RegionBox.add_external_callback" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">add_external_callback</span><span class="p">(</span><span class="n">f</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>Save a reference to an external function to call when a region box is clicked.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>f</code></b>
              –
              <div class="doc-md-description">
                <p>aditional function to call when a checkbox is clicked</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>
            <details class="quote">
              <summary>Source code in <code>src/gui/regionbox.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">add_external_callback</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Save a reference to an external function to call when a region box is clicked.</span>

<span class="sd">    Arguments:</span>
<span class="sd">      f: aditional function to call when a checkbox is clicked</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">external_cb</span> <span class="o">=</span> <span class="n">f</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div><h2 id="targetbox">TargetBox</h2>


<div class="doc doc-object doc-class">




    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><span title="panel.Column">Column</span></code></p>


      <p>The restoration targets are shown in a matrix with a selection widget
next to each target name.  The TargetBox widget has two tabs showing
different types of selection widgets, either simple checkboxes (shown
by a BasicTargetBox) or text entry widgets (shown by WeightedTargetBox).</p>

                  <details class="quote">
                    <summary>Source code in <code>src/gui/targetbox.py</code></summary>
                    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="nb">super</span><span class="p">(</span><span class="n">TargetBox</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">margin</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">5</span><span class="p">))</span>

    <span class="k">if</span> <span class="n">OP</span><span class="o">.</span><span class="n">mapping_name</span><span class="p">:</span>
        <span class="n">lst</span> <span class="o">=</span> <span class="p">[</span><span class="n">s</span><span class="o">.</span><span class="n">capitalize</span><span class="p">()</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">OP</span><span class="o">.</span><span class="n">target_columns</span><span class="p">]</span>
        <span class="n">label</span> <span class="o">=</span> <span class="n">OP</span><span class="o">.</span><span class="n">mapping_name</span><span class="o">.</span><span class="n">capitalize</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mapping_buttons</span> <span class="o">=</span> <span class="n">pn</span><span class="o">.</span><span class="n">widgets</span><span class="o">.</span><span class="n">RadioBoxGroup</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">label</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="n">lst</span><span class="p">)</span>
        <span class="n">mapping_box</span> <span class="o">=</span> <span class="n">pn</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span>
            <span class="n">pn</span><span class="o">.</span><span class="n">pane</span><span class="o">.</span><span class="n">HTML</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;&lt;b&gt;</span><span class="si">{</span><span class="n">label</span><span class="si">}</span><span class="s1">&lt;b&gt;&#39;</span><span class="p">,</span> <span class="n">align</span><span class="o">=</span><span class="s1">&#39;start&#39;</span><span class="p">),</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">mapping_buttons</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mapping_buttons</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">tabs</span> <span class="o">=</span> <span class="n">pn</span><span class="o">.</span><span class="n">Tabs</span><span class="p">(</span>
        <span class="p">(</span><span class="s1">&#39;Basic&#39;</span><span class="p">,</span> <span class="n">BasicTargetBox</span><span class="p">()),</span>
        <span class="p">(</span><span class="s1">&#39;Weighted&#39;</span><span class="p">,</span> <span class="n">WeightedTargetBox</span><span class="p">()),</span>
    <span class="p">)</span>
    <span class="n">row</span> <span class="o">=</span> <span class="n">pn</span><span class="o">.</span><span class="n">Row</span><span class="p">()</span>
    <span class="n">row</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tabs</span><span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mapping_buttons</span><span class="p">:</span>
        <span class="n">row</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">mapping_box</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
                  </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="src.gui.targetbox.TargetBox.make_layout" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">make_layout</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

      <p>Read the target layout (size of grid, location of each target in the grid)</p>

            <details class="quote">
              <summary>Source code in <code>src/gui/targetbox.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">make_layout</span><span class="p">(</span><span class="n">obj</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Read the target layout (size of grid, location of each target in the grid)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">obj</span><span class="o">.</span><span class="n">layout</span> <span class="o">=</span> <span class="p">[</span><span class="n">s</span><span class="o">.</span><span class="n">split</span><span class="p">()</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">OP</span><span class="o">.</span><span class="n">target_layout</span><span class="p">]</span>
    <span class="n">obj</span><span class="o">.</span><span class="n">nrows</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">layout</span><span class="p">)</span>
    <span class="n">obj</span><span class="o">.</span><span class="n">ncols</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">r</span><span class="p">)</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">obj</span><span class="o">.</span><span class="n">layout</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="src.gui.targetbox.TargetBox.selection" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">selection</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>Get a list of IDs of selected targets from the current target widget.</p>

            <details class="quote">
              <summary>Source code in <code>src/gui/targetbox.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">selection</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get a list of IDs of selected targets from the current target widget.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">tabs</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">tabs</span><span class="o">.</span><span class="n">active</span><span class="p">]</span><span class="o">.</span><span class="n">selection</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="src.gui.targetbox.TargetBox.weights" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">weights</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>Get target weights from the current target widget.</p>

            <details class="quote">
              <summary>Source code in <code>src/gui/targetbox.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">weights</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get target weights from the current target widget.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">tabs</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">tabs</span><span class="o">.</span><span class="n">active</span><span class="p">]</span><span class="o">.</span><span class="n">weights</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="src.gui.targetbox.TargetBox.mapping" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">mapping</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>If the targets have alternative column name mappings return the selected
mapping name</p>

            <details class="quote">
              <summary>Source code in <code>src/gui/targetbox.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">mapping</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    If the targets have alternative column name mappings return the selected</span>
<span class="sd">    mapping name</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">mapping_buttons</span><span class="o">.</span><span class="n">value</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="k">if</span> <span class="n">OP</span><span class="o">.</span><span class="n">mapping_name</span> <span class="k">else</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div><h3 id="basictargetbox">BasicTargetBox</h3>


<div class="doc doc-object doc-class">




    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><span title="panel.Column">Column</span></code></p>


      <p>The BasicTargetBox widget displays a checkbox next to each target name.</p>

                  <details class="quote">
                    <summary>Source code in <code>src/gui/targetbox.py</code></summary>
                    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Make the grid of checkboxes.  The IDs and descriptions of targets are</span>
<span class="sd">    fetched by calling the make_layout function in the Target class.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">(</span><span class="n">BasicTargetBox</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">margin</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">5</span><span class="p">))</span>
    <span class="n">TargetBox</span><span class="o">.</span><span class="n">make_layout</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">grid</span> <span class="o">=</span> <span class="n">pn</span><span class="o">.</span><span class="n">GridBox</span><span class="p">(</span><span class="n">nrows</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nrows</span><span class="p">,</span> <span class="n">ncols</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ncols</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">row</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">=</span> <span class="n">OP</span><span class="o">.</span><span class="n">target_frame</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">t</span><span class="p">]</span><span class="o">.</span><span class="n">long</span>
            <span class="n">b</span> <span class="o">=</span> <span class="n">pn</span><span class="o">.</span><span class="n">widgets</span><span class="o">.</span><span class="n">Checkbox</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">s</span><span class="p">,</span> <span class="n">styles</span><span class="o">=</span><span class="n">box_styles</span><span class="p">,</span> <span class="n">stylesheets</span><span class="o">=</span><span class="p">[</span><span class="n">box_style_sheet</span><span class="p">],</span> <span class="n">tags</span><span class="o">=</span><span class="p">[</span><span class="n">t</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
                  </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="src.gui.targetbox.BasicTargetBox.selection" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">selection</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Return a list of IDs of selected targets.</p>

            <details class="quote">
              <summary>Source code in <code>src/gui/targetbox.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">selection</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return a list of IDs of selected targets.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">b</span><span class="o">.</span><span class="n">tags</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="o">.</span><span class="n">objects</span> <span class="k">if</span> <span class="n">b</span><span class="o">.</span><span class="n">value</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="src.gui.targetbox.BasicTargetBox.weights" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">weights</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>There are no weights (all targets considered equally) so return an empty list.</p>

            <details class="quote">
              <summary>Source code in <code>src/gui/targetbox.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">weights</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    There are no weights (all targets considered equally) so return an empty list.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">[]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div><h3 id="weightedtargetbox">WeightedTargetBox</h3>


<div class="doc doc-object doc-class">




    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><span title="panel.Column">Column</span></code></p>


      <p>A WeightedTargetBox shows a text entry widget next to each target to allow
users to enter a numeric weight for the target.</p>

                  <details class="quote">
                    <summary>Source code in <code>src/gui/targetbox.py</code></summary>
                    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Make the grid of text entry widgets.  The IDs and descriptions of targets are</span>
<span class="sd">    fetched by calling the make_layout function in the Target class.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">(</span><span class="n">WeightedTargetBox</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">margin</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">5</span><span class="p">))</span>
    <span class="n">TargetBox</span><span class="o">.</span><span class="n">make_layout</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">grid</span> <span class="o">=</span> <span class="n">pn</span><span class="o">.</span><span class="n">GridBox</span><span class="p">(</span><span class="n">nrows</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nrows</span><span class="p">,</span> <span class="n">ncols</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ncols</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">row</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">=</span> <span class="n">OP</span><span class="o">.</span><span class="n">target_frame</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">t</span><span class="p">]</span><span class="o">.</span><span class="n">long</span>
            <span class="n">w</span> <span class="o">=</span> <span class="n">pn</span><span class="o">.</span><span class="n">Row</span><span class="p">()</span>
            <span class="n">w</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pn</span><span class="o">.</span><span class="n">widgets</span><span class="o">.</span><span class="n">TextInput</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">placeholder</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">25</span><span class="p">,</span> <span class="n">align</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span> <span class="n">stylesheets</span><span class="o">=</span><span class="p">[</span><span class="n">input_style_sheet</span><span class="p">],</span> <span class="n">tags</span><span class="o">=</span><span class="p">[</span><span class="n">t</span><span class="p">]))</span>
            <span class="n">w</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pn</span><span class="o">.</span><span class="n">pane</span><span class="o">.</span><span class="n">HTML</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">w</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
                  </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="src.gui.targetbox.WeightedTargetBox.selection" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">selection</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Return a list of IDs of selected targets.</p>

            <details class="quote">
              <summary>Source code in <code>src/gui/targetbox.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">selection</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return a list of IDs of selected targets.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">w</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">tags</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="o">.</span><span class="n">objects</span> <span class="k">if</span> <span class="n">w</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">value</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="src.gui.targetbox.WeightedTargetBox.weights" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">weights</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Return the text content of each non-empty text entry box.</p>

            <details class="quote">
              <summary>Source code in <code>src/gui/targetbox.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">weights</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return the text content of each non-empty text entry box.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">w</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">value</span> <span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="o">.</span><span class="n">objects</span> <span class="k">if</span> <span class="n">w</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">value</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div><h2 id="tgmap">TGMap</h2>


<div class="doc doc-object doc-class">




    <div class="doc doc-contents first">


      <p>A TGMap object manages the display of a map that shows the locations of the barriers
in a project.  </p>
<p>A static method named <code>init</code> is a factory that instantiates a new map.  It will read 
the "mapinfo" file for the project and return a reference to a new
map object belonging to the class specified in the mapinfo file.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Attributes:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>map</code></b>
              –
              <div class="doc-md-description">
                <p>a Bokeh figure object, with x and y ranges defined by the locations of the barriers</p>
              </div>
            </li>
            <li>
              <b><code>dots</code></b>
              –
              <div class="doc-md-description">
                <p>a dictionary that maps region names to a list of circle glyphs for each barrier in a region</p>
              </div>
            </li>
            <li>
              <b><code>ranges</code></b>
              –
              <div class="doc-md-description">
                <p>a data frame that has the range of x and y coordinates for each region</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="src.gui.tgmap.TGMap.map_coords" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">map_coords</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>Return a frame that has the coordinates and other info needed to display
gates on a map</p>

            <details class="quote">
              <summary>Source code in <code>src/gui/tgmap.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">map_coords</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    Return a frame that has the coordinates and other info needed to display</span>
<span class="sd">    gates on a map</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_map_coords</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="src.gui.tgmap.TGMap.graphic" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">graphic</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>Return a reference to the map (a Bokeh figure).</p>

            <details class="quote">
              <summary>Source code in <code>src/gui/tgmap.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">graphic</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    Return a reference to the map (a Bokeh figure).</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">map</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="src.gui.tgmap.TGMap.display_regions" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">display_regions</span><span class="p">(</span><span class="n">selection</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>Method called when the user clicks the checkbox next to the name
of a region.  Set the visible attribute of each dot to True or False depending
on whether the region it is in is selected.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>selection</code></b>
              –
              <div class="doc-md-description">
                <p>a list of names of regions currently selected</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>
            <details class="quote">
              <summary>Source code in <code>src/gui/tgmap.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">display_regions</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">selection</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Method called when the user clicks the checkbox next to the name</span>
<span class="sd">    of a region.  Set the visible attribute of each dot to True or False depending</span>
<span class="sd">    on whether the region it is in is selected.</span>

<span class="sd">    Arguments:</span>
<span class="sd">      selection:  a list of names of regions currently selected</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">r</span><span class="p">,</span> <span class="n">dots</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">dots</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">dots</span><span class="o">.</span><span class="n">visible</span> <span class="o">=</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">selection</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div><h3 id="staticmap">StaticMap</h3>


<div class="doc doc-object doc-class">




    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><span title="src.gui.tgmap.TGMap">TGMap</span></code></p>


      <p>A static map is simply a PNG file downloaded from the server.</p>

                  <details class="quote">
                    <summary>Source code in <code>src/gui/tgmap.py</code></summary>
                    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span>
<span class="normal">96</span>
<span class="normal">97</span>
<span class="normal">98</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">OP</span><span class="o">.</span><span class="n">server_url</span><span class="si">}</span><span class="s2">/map/</span><span class="si">{</span><span class="n">OP</span><span class="o">.</span><span class="n">project_name</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">OP</span><span class="o">.</span><span class="n">mapinfo</span><span class="p">[</span><span class="s1">&#39;map_file&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Fetching map from </span><span class="si">{</span><span class="n">url</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="n">xpixels</span> <span class="o">=</span> <span class="mi">473</span>
    <span class="n">ypixels</span> <span class="o">=</span> <span class="mi">533</span>
    <span class="n">p</span> <span class="o">=</span> <span class="n">bk</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span>
        <span class="n">title</span><span class="o">=</span><span class="n">OP</span><span class="o">.</span><span class="n">mapinfo</span><span class="p">[</span><span class="s1">&#39;map_title&#39;</span><span class="p">],</span>
        <span class="n">x_range</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">xpixels</span><span class="p">),</span> 
        <span class="n">y_range</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">ypixels</span><span class="p">),</span>
        <span class="n">tools</span><span class="o">=</span><span class="n">OP</span><span class="o">.</span><span class="n">mapinfo</span><span class="p">[</span><span class="s1">&#39;map_tools&#39;</span><span class="p">],</span>
        <span class="n">tooltips</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">(</span><span class="s2">&quot;Barrier&quot;</span><span class="p">,</span> <span class="s2">&quot;@ID&quot;</span><span class="p">),</span>
            <span class="p">(</span><span class="s2">&quot;Region&quot;</span><span class="p">,</span> <span class="s2">&quot;@region&quot;</span><span class="p">),</span>
            <span class="p">(</span><span class="s2">&quot;Cost&quot;</span><span class="p">,</span> <span class="s2">&quot;@cost&quot;</span><span class="p">)</span>
        <span class="p">]</span>
    <span class="p">)</span>
    <span class="n">p</span><span class="o">.</span><span class="n">image_url</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="p">[</span><span class="n">url</span><span class="p">],</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">ypixels</span><span class="p">,</span> <span class="n">h</span> <span class="o">=</span> <span class="n">ypixels</span><span class="p">,</span> <span class="n">w</span> <span class="o">=</span> <span class="n">xpixels</span><span class="p">)</span>
    <span class="n">bf</span> <span class="o">=</span> <span class="n">OP</span><span class="o">.</span><span class="n">barrier_frame</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">dots</span> <span class="o">=</span> <span class="p">{</span> <span class="p">}</span>
    <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">OP</span><span class="o">.</span><span class="n">region_names</span><span class="p">:</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">bf</span><span class="p">[</span><span class="n">bf</span><span class="o">.</span><span class="n">region</span> <span class="o">==</span> <span class="n">r</span><span class="p">]</span>
        <span class="n">c</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">circle</span><span class="p">(</span><span class="s1">&#39;X&#39;</span><span class="p">,</span><span class="s1">&#39;Y&#39;</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;darkslategray&#39;</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">df</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dots</span><span class="p">[</span><span class="n">r</span><span class="p">]</span> <span class="o">=</span> <span class="n">c</span>
        <span class="n">c</span><span class="o">.</span><span class="n">visible</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">map</span> <span class="o">=</span> <span class="n">p</span>

    <span class="n">df</span> <span class="o">=</span> <span class="n">bf</span><span class="p">[[</span><span class="s1">&#39;region&#39;</span><span class="p">,</span><span class="s1">&#39;X&#39;</span><span class="p">,</span><span class="s1">&#39;Y&#39;</span><span class="p">]]</span>
    <span class="n">df</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;region&#39;</span><span class="p">,</span><span class="s1">&#39;x&#39;</span><span class="p">,</span><span class="s1">&#39;y&#39;</span><span class="p">]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_map_coords</span> <span class="o">=</span> <span class="n">df</span>
</code></pre></div></td></tr></table></div>
                  </details>



  <div class="doc doc-children">











  </div>

    </div>

</div><h3 id="tiledmap">TiledMap</h3>


<div class="doc doc-object doc-class">




    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><span title="src.gui.tgmap.TGMap">TGMap</span></code></p>


      <p>A tiled map uses a tile server to fetch the map image.  Fetch the main barrier
file to get the coordinates and other data for each barrier.</p>

                  <details class="quote">
                    <summary>Source code in <code>src/gui/tgmap.py</code></summary>
                    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="c1"># bf = self._fetch_barriers()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_map_coords</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_make_info</span><span class="p">(</span><span class="n">OP</span><span class="o">.</span><span class="n">barrier_frame</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">regions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_make_region_list</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">ranges</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_ranges</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">tile_provider</span> <span class="o">=</span> <span class="n">get_provider</span><span class="p">(</span><span class="n">xyz</span><span class="o">.</span><span class="n">OpenStreetMap</span><span class="o">.</span><span class="n">Mapnik</span><span class="p">)</span>
    <span class="n">p</span> <span class="o">=</span> <span class="n">bk</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span>
        <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Oregon Coast&#39;</span><span class="p">,</span> 
        <span class="n">height</span><span class="o">=</span><span class="mi">900</span><span class="p">,</span>
        <span class="n">width</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span>
        <span class="n">x_range</span><span class="o">=</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_map_coords</span><span class="o">.</span><span class="n">x</span><span class="o">.</span><span class="n">min</span><span class="p">()</span><span class="o">*</span><span class="mf">0.997</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">_map_coords</span><span class="o">.</span><span class="n">x</span><span class="o">.</span><span class="n">max</span><span class="p">()</span><span class="o">*</span><span class="mf">1.003</span><span class="p">),</span> 
        <span class="n">y_range</span><span class="o">=</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_map_coords</span><span class="o">.</span><span class="n">y</span><span class="o">.</span><span class="n">min</span><span class="p">()</span><span class="o">*</span><span class="mf">0.997</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">_map_coords</span><span class="o">.</span><span class="n">y</span><span class="o">.</span><span class="n">max</span><span class="p">()</span><span class="o">*</span><span class="mf">1.003</span><span class="p">),</span>
        <span class="n">x_axis_type</span><span class="o">=</span><span class="s1">&#39;mercator&#39;</span><span class="p">,</span>
        <span class="n">y_axis_type</span><span class="o">=</span><span class="s1">&#39;mercator&#39;</span><span class="p">,</span>
        <span class="n">toolbar_location</span><span class="o">=</span><span class="s1">&#39;below&#39;</span><span class="p">,</span>
        <span class="n">tools</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;pan&#39;</span><span class="p">,</span><span class="s1">&#39;wheel_zoom&#39;</span><span class="p">,</span><span class="s1">&#39;hover&#39;</span><span class="p">,</span><span class="s1">&#39;reset&#39;</span><span class="p">],</span>
        <span class="n">tooltips</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">(</span><span class="s2">&quot;ID&quot;</span><span class="p">,</span> <span class="s2">&quot;@ID&quot;</span><span class="p">),</span>
            <span class="p">(</span><span class="s2">&quot;Region&quot;</span><span class="p">,</span> <span class="s2">&quot;@region&quot;</span><span class="p">),</span>
            <span class="p">(</span><span class="s2">&quot;Type&quot;</span><span class="p">,</span> <span class="s2">&quot;@type&quot;</span><span class="p">),</span>
        <span class="p">]</span>
    <span class="p">)</span>
    <span class="n">p</span><span class="o">.</span><span class="n">add_tile</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tile_provider</span><span class="p">)</span>
    <span class="n">p</span><span class="o">.</span><span class="n">toolbar</span><span class="o">.</span><span class="n">autohide</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">dots</span> <span class="o">=</span> <span class="p">{</span> <span class="p">}</span>
    <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">regions</span><span class="p">:</span>
        <span class="n">df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_map_coords</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_map_coords</span><span class="o">.</span><span class="n">region</span> <span class="o">==</span> <span class="n">r</span><span class="p">]</span>
        <span class="n">c</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">circle</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;darkslategray&#39;</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">df</span><span class="p">,</span> <span class="n">tags</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dots</span><span class="p">[</span><span class="n">r</span><span class="p">]</span> <span class="o">=</span> <span class="n">c</span>
        <span class="n">c</span><span class="o">.</span><span class="n">visible</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">map</span> <span class="o">=</span> <span class="n">p</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">outer_x</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_map_coords</span><span class="o">.</span><span class="n">x</span><span class="o">.</span><span class="n">min</span><span class="p">()</span><span class="o">*</span><span class="mf">0.997</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">_map_coords</span><span class="o">.</span><span class="n">x</span><span class="o">.</span><span class="n">max</span><span class="p">()</span><span class="o">*</span><span class="mf">1.003</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">outer_y</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_map_coords</span><span class="o">.</span><span class="n">y</span><span class="o">.</span><span class="n">min</span><span class="p">()</span><span class="o">*</span><span class="mf">0.997</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">_map_coords</span><span class="o">.</span><span class="n">y</span><span class="o">.</span><span class="n">max</span><span class="p">()</span><span class="o">*</span><span class="mf">1.003</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
                  </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="src.gui.tgmap.TiledMap._make_info" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">_make_info</span><span class="p">(</span><span class="n">bf</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Hidden method, makes a dataframe with attributes needed to display gates on a map.
Map latitude and longitude columns in the input frame to Mercator
coordinates, and copy the ID, region and barrier types so they can
be displayed as tooltips.</p>

            <details class="quote">
              <summary>Source code in <code>src/gui/tgmap.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">_make_info</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bf</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Hidden method, makes a dataframe with attributes needed to display gates on a map.</span>
<span class="sd">    Map latitude and longitude columns in the input frame to Mercator</span>
<span class="sd">    coordinates, and copy the ID, region and barrier types so they can</span>
<span class="sd">    be displayed as tooltips.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">bf</span><span class="p">[[</span><span class="s1">&#39;region&#39;</span><span class="p">,</span><span class="s1">&#39;type&#39;</span><span class="p">]]</span>
    <span class="n">R</span> <span class="o">=</span> <span class="mf">6378137.0</span>
    <span class="n">map_coords</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span>
        <span class="n">df</span><span class="p">,</span> 
        <span class="n">np</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="n">bf</span><span class="o">.</span><span class="n">X</span><span class="p">)</span><span class="o">*</span><span class="n">R</span><span class="p">,</span> 
        <span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">tan</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">4</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="n">bf</span><span class="o">.</span><span class="n">Y</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">))</span> <span class="o">*</span> <span class="n">R</span>
    <span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">map_coords</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;region&#39;</span><span class="p">,</span> <span class="s1">&#39;type&#39;</span><span class="p">,</span> <span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">map_coords</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="src.gui.tgmap.TiledMap._make_region_list" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">_make_region_list</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Hidden method, make a list of unique region names, sorted by latitude, so regions
are displayed in order from north to south.  Updates the list of names in the
OP object.</p>

            <details class="quote">
              <summary>Source code in <code>src/gui/tgmap.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">_make_region_list</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    Hidden method, make a list of unique region names, sorted by latitude, so regions</span>
<span class="sd">    are displayed in order from north to south.  Updates the list of names in the</span>
<span class="sd">    OP object.</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="n">df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_map_coords</span><span class="p">[[</span><span class="s1">&#39;region&#39;</span><span class="p">,</span><span class="s1">&#39;y&#39;</span><span class="p">]]</span>
    <span class="n">mf</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;region&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">numeric_only</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s1">&#39;y&#39;</span><span class="p">,</span><span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">names</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">mf</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
    <span class="n">OP</span><span class="o">.</span><span class="n">region_names</span> <span class="o">=</span> <span class="n">names</span>
    <span class="k">return</span> <span class="n">names</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="src.gui.tgmap.TiledMap._create_ranges" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">_create_ranges</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Hidden method, called by the constructor to create a Pandas Dataframe 
containing the range of latitudes and longitudes of the barriers in
a project.</p>

            <details class="quote">
              <summary>Source code in <code>src/gui/tgmap.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">_create_ranges</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Hidden method, called by the constructor to create a Pandas Dataframe </span>
<span class="sd">    containing the range of latitudes and longitudes of the barriers in</span>
<span class="sd">    a project.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">g</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_map_coords</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;region&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
        <span class="s1">&#39;x_min&#39;</span><span class="p">:</span> <span class="n">g</span><span class="o">.</span><span class="n">min</span><span class="p">()</span><span class="o">.</span><span class="n">x</span><span class="p">,</span>
        <span class="s1">&#39;x_max&#39;</span><span class="p">:</span> <span class="n">g</span><span class="o">.</span><span class="n">max</span><span class="p">()</span><span class="o">.</span><span class="n">x</span><span class="p">,</span>
        <span class="s1">&#39;y_min&#39;</span><span class="p">:</span> <span class="n">g</span><span class="o">.</span><span class="n">min</span><span class="p">()</span><span class="o">.</span><span class="n">y</span><span class="p">,</span>
        <span class="s1">&#39;y_max&#39;</span><span class="p">:</span> <span class="n">g</span><span class="o">.</span><span class="n">max</span><span class="p">()</span><span class="o">.</span><span class="n">y</span><span class="p">,</span>
    <span class="p">})</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="src.gui.tgmap.TiledMap.display_regions" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">display_regions</span><span class="p">(</span><span class="n">selection</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Update the map, setting the x and y range based on the currently selected
regions.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>selection</code></b>
              –
              <div class="doc-md-description">
                <p>a list of names of regions currently selected</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>
            <details class="quote">
              <summary>Source code in <code>src/gui/tgmap.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">display_regions</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">selection</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Update the map, setting the x and y range based on the currently selected</span>
<span class="sd">    regions.</span>

<span class="sd">    Arguments:</span>
<span class="sd">      selection:  a list of names of regions currently selected</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">display_regions</span><span class="p">(</span><span class="n">selection</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">selection</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">xmin</span> <span class="o">=</span> <span class="nb">min</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">ranges</span><span class="p">[</span><span class="s1">&#39;x_min&#39;</span><span class="p">][</span><span class="n">r</span><span class="p">]</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">selection</span><span class="p">])</span>
        <span class="n">xmax</span> <span class="o">=</span> <span class="nb">max</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">ranges</span><span class="p">[</span><span class="s1">&#39;x_max&#39;</span><span class="p">][</span><span class="n">r</span><span class="p">]</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">selection</span><span class="p">])</span>
        <span class="n">ymin</span> <span class="o">=</span> <span class="nb">min</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">ranges</span><span class="p">[</span><span class="s1">&#39;y_min&#39;</span><span class="p">][</span><span class="n">r</span><span class="p">]</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">selection</span><span class="p">])</span>
        <span class="n">ymax</span> <span class="o">=</span> <span class="nb">max</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">ranges</span><span class="p">[</span><span class="s1">&#39;y_max&#39;</span><span class="p">][</span><span class="n">r</span><span class="p">]</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">selection</span><span class="p">])</span>

        <span class="n">mx</span> <span class="o">=</span> <span class="p">(</span><span class="n">xmax</span><span class="o">+</span><span class="n">xmin</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span>
        <span class="n">my</span> <span class="o">=</span> <span class="p">(</span><span class="n">ymax</span><span class="o">+</span><span class="n">ymin</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span>
        <span class="n">dx</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">5000</span><span class="p">,</span> <span class="n">xmax</span> <span class="o">-</span> <span class="n">xmin</span><span class="p">)</span>
        <span class="n">dy</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">5000</span><span class="p">,</span> <span class="n">ymax</span> <span class="o">-</span> <span class="n">ymin</span><span class="p">)</span>
        <span class="n">ar</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">map</span><span class="o">.</span><span class="n">height</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">map</span><span class="o">.</span><span class="n">width</span>

        <span class="k">if</span> <span class="n">dy</span> <span class="o">/</span> <span class="n">dx</span> <span class="o">&gt;</span> <span class="n">ar</span><span class="p">:</span>
            <span class="n">dx</span> <span class="o">=</span> <span class="n">dy</span> <span class="o">/</span> <span class="n">ar</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">dy</span> <span class="o">=</span> <span class="n">dx</span> <span class="o">*</span> <span class="n">ar</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">map</span><span class="o">.</span><span class="n">x_range</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="n">mx</span><span class="o">-</span><span class="n">dx</span><span class="o">/</span><span class="mi">2</span><span class="o">-</span><span class="mi">5000</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="n">mx</span><span class="o">+</span><span class="n">dx</span><span class="o">/</span><span class="mi">2</span><span class="o">+</span><span class="mi">5000</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">map</span><span class="o">.</span><span class="n">y_range</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="n">my</span><span class="o">-</span><span class="n">dy</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="n">my</span><span class="o">+</span><span class="n">dy</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">map</span><span class="o">.</span><span class="n">x_range</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">outer_x</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">end</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">outer_x</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">map</span><span class="o">.</span><span class="n">y_range</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">outer_y</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">end</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">outer_y</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">map</span><span class="o">.</span><span class="n">add_tile</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tile_provider</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../modules/" class="btn btn-neutral float-left" title="Reference"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../tests/" class="btn btn-neutral float-right" title="Tests">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../modules/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../tests/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
